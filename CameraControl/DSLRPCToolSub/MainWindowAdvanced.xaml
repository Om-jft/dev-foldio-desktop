<Controls:MetroWindow x:Class="CameraControl.MainWindowAdvanced" 
                      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                      xmlns:gif="http://wpfanimatedgif.codeplex.com"
                    Title="OrangeMonkie" Height="799" Width="987" 
                    TextElement.Foreground="{DynamicResource MaterialDesignBody}"
                    TextElement.FontWeight="Regular"
                    TextElement.FontSize="13"
                    TextOptions.TextFormattingMode="Ideal"
                    TextOptions.TextRenderingMode="Auto"
                    Background="{DynamicResource MaterialDesignPaper}"
                    FontFamily="{DynamicResource MaterialDesignFont}" 
                    GlowBrush="{DynamicResource AccentColorBrush}"
                      
                    xmlns:my="clr-namespace:CameraControl"
                    xmlns:local="clr-namespace:CameraControl.Controls"
                    xmlns:local1="clr-namespace:DSLR_Tool_PC.Controles"   
                    xmlns:Core="clr-namespace:CameraControl.Core;assembly=CameraControl.Core"
                    xmlns:myClasess="clr-namespace:CameraControl.Classes"
                    xmlns:Controls="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro"
                    xmlns:T="clr-namespace:CameraControl.Core.Translation;assembly=CameraControl.Core"
                    xmlns:Panels="clr-namespace:CameraControl.Panels"
                    xmlns:Devices="clr-namespace:CameraControl.Devices;assembly=CameraControl.Devices"
                    xmlns:tb="http://www.hardcodet.net/taskbar"
                    xmlns:dragDrop="clr-namespace:GongSolutions.Wpf.DragDrop;assembly=GongSolutions.Wpf.DragDrop"
                    xmlns:viewModel="clr-namespace:CameraControl.ViewModel"
                    xmlns:wpf="clr-namespace:CameraControl.Core.Wpf;assembly=CameraControl.Core"
                    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
                    xmlns:zoomAndPan="clr-namespace:CameraControl.Core.Controls.ZoomAndPan;assembly=CameraControl.Core" xmlns:layouts="clr-namespace:CameraControl.Layouts"
                      Name="Window" ShowTitleBar="False"
                    Icon="/CameraControl;component/Images/logo.png" 
                    WindowState="Maximized" VerticalContentAlignment="Center" 
                       
                    Closed="Window_Closed" 
                    Closing="Window_Closing" 
                    PreviewKeyDown="MetroWindow_PreviewKeyDown" 
                    Loaded="MetroWindow_Loaded" 
                    KeyDown="Window_KeyDown" 
                    StateChanged="Window_StateChanged" 
                    MouseWheel="Window_MouseWheel" 
                    SizeChanged="Window_SizeChanged"                        
                    ContentRendered="Window_ContentRendered"
                     MouseDown="Window_MouseDown">
    <!--<i:Interaction.Behaviors>
        <Behaviours:BorderlessWindowBehavior/>
    </i:Interaction.Behaviors>-->
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="../Resources/Icons.xaml" />
                <ResourceDictionary Source="../Resources/MoreIcons.xaml" />
                <ResourceDictionary Source="../Styles/ExpanderEx.xaml" />
                <ResourceDictionary Source="/DSLRPCToolSub/Theme/Theme.xaml" />

                <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.Button.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.CheckBox.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.PopupBox.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.RadioButton.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.TextBlock.xaml" />
                <!--<ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.TextBox.xaml" />-->
                <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.ToggleButton.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.Snackbar.xaml" />

            </ResourceDictionary.MergedDictionaries>
            <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter1" />
            <wpf:IntToProgressConverter x:Key="MyConverter"/>
            <wpf:ItemBackgroundConverter x:Key="myConverter1"/>
            <Style x:Key="ZoomStyle" TargetType="{x:Type zoomAndPan:ZoomAndPanControl}">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type zoomAndPan:ZoomAndPanControl}">
                            <Grid Background="{TemplateBinding Background}">
                                <ContentPresenter  x:Name="PART_Content" HorizontalAlignment="Left" VerticalAlignment="Top" />
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </ResourceDictionary>
    </Window.Resources>

    <Window.TaskbarItemInfo  >
        <TaskbarItemInfo ProgressValue="{Binding Source={x:Static Core:ServiceProvider.DeviceManager}, Path=SelectedCameraDevice.TransferProgress, Converter={StaticResource MyConverter}}" ProgressState="Normal"  />
    </Window.TaskbarItemInfo>

    <!--<Controls:MetroWindow.RightWindowCommands>
        <Controls:WindowCommands>
            <CheckBox Content="{T:TranslateExtension LabelStayOnTop2}" Name="btn_stay_on_top" IsChecked="{Binding Path=Topmost, RelativeSource={RelativeSource FindAncestor, AncestorType=my:MainWindowAdvanced, AncestorLevel=1}}" VerticalAlignment="Center" VerticalContentAlignment="Center"/>
        </Controls:WindowCommands>
    </Controls:MetroWindow.RightWindowCommands>-->

    <Grid>
        <Grid Background="#222222">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto" />
                <RowDefinition />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <tb:TaskbarIcon Name="MyNotifyIcon" 
                  IconSource="/CameraControl;component/om.ico"
                  ToolTipText="OrangeMonkie" TrayMouseDoubleClick="MyNotifyIcon_TrayMouseDoubleClick" MenuActivation="LeftOrRightClick">
                <tb:TaskbarIcon.ContextMenu>
                    <ContextMenu>
                        <ContextMenu.DataContext>
                            <viewModel:MainMenuViewModel/>
                        </ContextMenu.DataContext>
                        <MenuItem Header="{T:TranslateExtension LabelRestore}" Command="{Binding SendCommand}" CommandParameter="Restore" InputGestureText="{myClasess:CommandShortcutExtensioncs Restore}"/>
                        <Separator/>
                        <MenuItem Header="{T:TranslateExtension MenuExit}" Command="{Binding SendCommand}" CommandParameter="All_Close" InputGestureText="{myClasess:CommandShortcutExtensioncs All_Close}"/>
                    </ContextMenu>
                </tb:TaskbarIcon.ContextMenu>
            </tb:TaskbarIcon>


            <Grid Grid.Column="1" Grid.ColumnSpan="2" Grid.Row="2" Grid.RowSpan="4" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"  ShowGridLines="False" Margin="0">
                <!--<DockPanel   Name="StackLayout" Margin="0"/>-->
                <!--<Controls:ProgressRing IsActive="True" Height="184" Width="214" IsLarge="False" />-->
            </Grid>

            <!--<Controls:MetroContentControl Grid.ColumnSpan="4">-->
            <WrapPanel Grid.Row="1"  Grid.ColumnSpan="3">
                <!--<Button ToolTip="{T:TranslateExtension CapturePhotoToolTip}"  Width="40" Height="40" Name="button3" Click="button3_Click" IsEnabled="{Binding Source={x:Static Member=Core:ServiceProvider.DeviceManager}, Path=SelectedCameraDevice.IsConnected}" Margin="4" Style="{StaticResource MaterialDesignFloatingActionLightButton}"
                    materialDesign:ButtonProgressAssist.IsIndicatorVisible="True"
                    materialDesign:ButtonProgressAssist.Value="{Binding Source={x:Static Core:ServiceProvider.DeviceManager}, Path=SelectedCameraDevice.TransferProgress}">
                    <materialDesign:PackIcon Kind="CameraIris" Height="35" Width="35" />
                </Button>-->
                <!--<ProgressBar  Style="{StaticResource MaterialDesignCircularProgressBar
}" Value="50" IsIndeterminate="True" VerticalAlignment="Center" HorizontalAlignment="Center" Margin="-44,5,5,5" Height="40" Width="40" 
                         Visibility="{Binding Source={x:Static Member=Core:ServiceProvider.DeviceManager}, Path=SelectedCameraDevice.IsBusy}"/>-->

                <!--<Button Content="Lv" ToolTip="{T:TranslateExtension LiveViewToolTip}" Height="40" Name="btn_liveview" Width="40" Margin="4" Command="{Binding Source={x:Static Member=myClasess:WpfCommands.ShowLiveViewCommand}}" CommandParameter="{Binding Source={x:Static Member=Core:ServiceProvider.DeviceManager}, Path=SelectedCameraDevice}" FontSize="15" Style="{StaticResource MaterialDesignFloatingActionLightButton}"
                        Visibility="{Binding Source={x:Static Member=Core:ServiceProvider.Branding}, Path=ShowLiveViewButtonMainWindow, Converter={StaticResource BooleanToVisibilityConverter1}}"/>-->
                <Button  ToolTip="{T:TranslateExtension DownloadWindowTitle}" Height="40" Name="but_download" Width="40" Margin="4" Style="{StaticResource MaterialDesignFloatingActionLightButton}" IsEnabled="{Binding Source={x:Static Member=Core:ServiceProvider.DeviceManager}, Path=SelectedCameraDevice.IsConnected}" Click="but_download_Click"
                        Visibility="{Binding Source={x:Static Member=Core:ServiceProvider.Branding}, Path=ShowDownloadButtonMainWindow, Converter={StaticResource BooleanToVisibilityConverter1}}">
                    <materialDesign:PackIcon Kind="Download" Height="35" Width="35" />
                </Button>

                <Button Content="[BR]" ToolTip="{T:TranslateExtension BraketingToolTip}" Width="40"  Height="40" Name="btn_br" IsEnabled="{Binding Source={x:Static Member=Core:ServiceProvider.DeviceManager}, Path=SelectedCameraDevice.IsConnected}" Margin="4" Click="btn_br_Click" FontSize="14" Style="{StaticResource MaterialDesignFloatingActionLightButton}"
                        Visibility="{Binding Source={x:Static Member=Core:ServiceProvider.Branding}, Path=ShowBracketingButtonMainWindow, Converter={StaticResource BooleanToVisibilityConverter1}}"/>
                <!--<ToggleButton ToolTip="Image property" Height="50" Width="50" Name="button1"  Click="button1_Click" Margin="5">
                    <Image Margin="5" Source="/CameraControl;component/Images/Properties.png"/>
                </ToggleButton>-->
                <Button ToolTip="{T:TranslateExtension TimeLapseToolTip}" Height="40" Name="but_timelapse" Width="40" Margin="4" Click="but_timelapse_Click" Style="{StaticResource MaterialDesignFloatingActionLightButton}"
                        Visibility="{Binding Source={x:Static Member=Core:ServiceProvider.Branding}, Path=ShowTimelapseButtonMainWindow, Converter={StaticResource BooleanToVisibilityConverter1}}">
                    <materialDesign:PackIcon Kind="Timelapse" Height="35" Width="35" />
                </Button>
                <Button ToolTip="{T:TranslateExtension FullscreenToolTip}" Height="40" Name="but_fullscreen" Width="40" Margin="4" Click="but_fullscreen_Click" Style="{StaticResource MaterialDesignFloatingActionLightButton}"
                        Visibility="{Binding Source={x:Static Member=Core:ServiceProvider.Branding}, Path=ShowFullScreenButtonMainWindow, Converter={StaticResource BooleanToVisibilityConverter1}}">
                    <materialDesign:PackIcon Kind="Fullscreen" Height="35" Width="35" />
                </Button>
                <Button ToolTip="{T:TranslateExtension BrowseSessionsToolTip}" Height="40" Name="btn_browse" Width="40" Margin="4"  FontSize="15" Click="btn_browse_Click" Style="{StaticResource MaterialDesignFloatingActionLightButton}"
                        Visibility="{Binding Source={x:Static Member=Core:ServiceProvider.Branding}, Path=ShowBrowseButtonMainWindow, Converter={StaticResource BooleanToVisibilityConverter1}}">
                    <materialDesign:PackIcon Kind="FolderImage" Height="35" Width="35" />
                </Button>
                <Button ToolTip="{T:TranslateExtension LabelAstronomy}" Height="40" Name="but_star" Width="40" Margin="4" Style="{StaticResource MaterialDesignFloatingActionLightButton}" Click="but_star_Click"
                        Visibility="{Binding Source={x:Static Member=Core:ServiceProvider.Branding}, Path=ShowAstronomyButtonMainWindow, Converter={StaticResource BooleanToVisibilityConverter1}}">
                    <materialDesign:PackIcon Kind="WeatherNight" Height="35" Width="35" />
                </Button>
                <Button ToolTip="{T:TranslateExtension MenuMultipleCamera}" Height="40" Name="but_multiple" Width="40" Margin="4" Style="{StaticResource MaterialDesignFloatingActionLightButton}" Click="Button_Click"
                        Visibility="{Binding Source={x:Static Member=Core:ServiceProvider.Branding}, Path=ShowMulyiCameraButtonMainWindow, Converter={StaticResource BooleanToVisibilityConverter1}}">
                    <materialDesign:PackIcon Kind="ImageMultiple" Height="35" Width="35" />
                </Button>
                <Button ToolTip="{T:TranslateExtension LabelWifi}" Height="40" Name="but_wifi" Width="40" Margin="4" Style="{StaticResource MaterialDesignFloatingActionLightButton}" Click="but_wifi_Click"
                        Visibility="{Binding Source={x:Static Member=Core:ServiceProvider.Branding}, Path=ShowWifiCameraButtonMainWindow, Converter={StaticResource BooleanToVisibilityConverter1}}">
                    <materialDesign:PackIcon Kind="SignalVariant" Height="35" Width="35" />
                </Button>
                <Button ToolTip="{T:TranslateExtension LabelPrint}" Height="40" Name="but_print" Width="40" Margin="4" Style="{StaticResource MaterialDesignFloatingActionLightButton}" 
                        Visibility="{Binding Source={x:Static Member=Core:ServiceProvider.Branding}, Path=ShowPrintButtonMainWindow, Converter={StaticResource BooleanToVisibilityConverter1}}"
                        Click="but_print_Click">
                    <materialDesign:PackIcon Kind="Printer" Height="35" Width="35" />
                </Button>
                <Button ToolTip="{T:TranslateExtension LabelWebserver}" Height="40" Name="but_qr" Width="40" Margin="4" Style="{DynamicResource MaterialDesignFloatingActionLightButton}"                         
                        Visibility="{Binding Source={x:Static Member=Core:ServiceProvider.Settings}, Path=UseWebserver, Converter={StaticResource BooleanToVisibilityConverter1}}"
                        Click="but_qr_Click">
                    <materialDesign:PackIcon Kind="Qrcode" Height="35" Width="35" />
                </Button>
                <ItemsControl ItemsSource="{Binding Source={x:Static Member=Core:ServiceProvider.PluginManager}, Path=ToolBarPlugins}" >
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <ContentControl Content="{Binding Control}" Visibility="{Binding Path=Visible, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Horizontal"/>
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                </ItemsControl>
            </WrapPanel>
            <!--</Controls:MetroContentControl>-->

            <!--<StackPanel Grid.Row="2" Grid.RowSpan="4" Grid.Column="0" Orientation="Horizontal" Margin="4">
                <local:Controler x:Name="controler2" DataContext="{Binding Source={x:Static Core:ServiceProvider.DeviceManager}}" IsEnabled="{Binding SelectedCameraDevice.IsConnected, Source={x:Static Core:ServiceProvider.DeviceManager}}" Margin="0" Padding="0" 
                             Visibility="{Binding ShowCameraPropertiesMainWindow, Converter={StaticResource BooleanToVisibilityConverter1}, Source={x:Static Core:ServiceProvider.Branding}}"/>
            </StackPanel>-->


            <Menu Background="#222222" Foreground="white" Grid.Row="0" Grid.ColumnSpan="4" Grid.Column="0" Visibility="{Binding Branding.ShowMainMenu, Converter={StaticResource BooleanToVisibilityConverter}}" Padding="0" Margin="0" HorizontalAlignment="Left"
              IsMainMenu="True" >
                <Menu.DataContext>
                    <viewModel:MainMenuViewModel/>
                </Menu.DataContext>
                <MenuItem Header="{T:TranslateExtension MenuFile}" Padding="5,2" Margin="1">
                    <!--<MenuItem Header="Open"   IsCheckable="False" IsChecked="False" IsEnabled="True" Visibility="Visible" Background="#222222" Foreground="White" InputGestureText="Ctrl+O">-->
                        
                    <!--</MenuItem>-->

                    <!--<MenuItem Header="Recent Open"    IsCheckable="False" IsChecked="False" IsEnabled="True" Visibility="Visible" Background="#222222" Foreground="White" Margin="0"/>-->
                    
                    <!--<MenuItem Header="Save"  IsCheckable="False" IsChecked="False" IsEnabled="True" Visibility="Visible" Background="#222222" Foreground="White" InputGestureText="Ctrl+S"/>
                    <MenuItem Header="Save As"   IsCheckable="False" IsChecked="False" IsEnabled="True" Visibility="Visible" Background="#222222" Foreground="White" InputGestureText="Ctrl+Shift+S"/>
                    
                    <MenuItem Header="Import"  IsCheckable="False" IsChecked="False" IsEnabled="True" Visibility="Visible" Background="#222222" Foreground="White" InputGestureText="Ctrl+Shift+I"/>-->
                    <MenuItem Header="Export" x:Name="MenuExport" IsCheckable="False" IsChecked="False" IsEnabled="True" Visibility="Visible" Background="#222222" Foreground="White">

                        <MenuItem Header="Quick GIF Export"  Click="QuickExport"  IsCheckable="False" IsChecked="False" IsEnabled="True" Visibility="Visible" Background="#222222" Foreground="White" InputGestureText="Ctrl+Shift+E" Padding="10,0,10,0"/>
                        <MenuItem Header="Other Export"  Click="MenuItem_Click_1" IsCheckable="False" IsChecked="False" IsEnabled="True" Visibility="Visible" Background="#222222" Foreground="White" InputGestureText="Ctrl+E" Padding="10,0,10,0"/>
                    </MenuItem>

                    <!--<MenuItem Header="Settings"  IsCheckable="False" IsChecked="False" IsEnabled="True" Visibility="Visible" Background="#222222" Foreground="White"/>-->
                    
                    <MenuItem Header="{T:TranslateExtension MenuExit}" InputGestureText="{myClasess:CommandShortcutExtensioncs All_Close}" Background="#222222" Foreground="White" Name="Exit" Click="Exit_Click"/>
                </MenuItem>
                
                <MenuItem Header="{T:TranslateExtension MenuView}" Padding="5,2" Margin="1" Visibility="{Binding Branding.ShowViewMenu, Converter={StaticResource BooleanToVisibilityConverter}}">
                    <MenuItem x:Name="menu_liveView" Header="Live View"  Background="#222222" Foreground="White">
                        <MenuItem Header="1:1" x:Name="ratio_1" IsCheckable="True" IsChecked="False" Checked="ratio1_Checked" Unchecked="ratio1_Unchecked"
                      Background="#222222" Foreground="White" Padding="0,0,20,0"/>
                        <MenuItem Header="4:3" x:Name="ratio_4" IsCheckable="True" IsChecked="False" Checked="ratio2_Checked" Unchecked="ratio2_Unchecked" Background="#222222" Foreground="White" Padding="0,0,20,0"/>
                        <MenuItem Header="16:9" x:Name="ratio_16" IsCheckable="True" IsChecked="False" Checked="ratio3_Checked" Unchecked="ratio3_Unchecked" Background="#222222" Foreground="White" Padding="0,0,20,0"/>
                    </MenuItem>
                    <MenuItem Header="Center Line" Background="#222222" Foreground="White">

                        <MenuItem Header="Vertical" x:Name="Vertical_mList"
               Click="Tg_Btn6_Checked" Checked="Tg_Btn6_Checked" Unchecked="Tg_Btn6_Unchecked"  IsCheckable="True" IsChecked="False"   Background="#222222"  Foreground="White" InputGestureText="Shift+V" Padding="0,0,20,0"/>
                        <MenuItem Header="_Horizontal" x:Name="Horizontal_mList" Click="Tg_Btn7_Checked" Checked="Tg_Btn7_Checked" Unchecked="Tg_Btn7_Unchecked" IsCheckable="True" IsChecked="False"  Background="#222222" Foreground="White" InputGestureText="Shift+H" Padding="0,0,20,0" />
                    </MenuItem>
                    <MenuItem Header="Grid"  Background="#222222" Foreground="White">
                        <MenuItem x:Name="Grid3x3" Header="3x3" IsCheckable="True" IsChecked="False" Checked="grid2_Checked" Unchecked="grid2_Unchecked" Background="#222222" Foreground="White"  InputGestureText="Shift+1" Padding="0,0,20,0" />
                        <MenuItem x:Name="Grid6x4" Header="6x4" IsCheckable="True" IsChecked="False" Checked="grid3_Checked" Unchecked="grid3_Unchecked" Background="#222222" Foreground="White" InputGestureText="Shift+2" Padding="0,0,20,0"/>
                        <MenuItem x:Name="Grid3x3Dial" Header="3x3 + Dial" IsCheckable="True" IsChecked="False" Checked="grid4_Checked" Unchecked="grid4_Unchecked"  Background="#222222" Foreground="White" InputGestureText="Shift+3" Padding="0,0,20,0" />
                        <MenuItem x:Name="toggle_grid_menu" Header="Toggle GRID" Background="#222222" Foreground="White" InputGestureText="Shift+G" Padding="0,0,20,0" Click="toggle_grid"/>
                    </MenuItem>
                    <MenuItem x:Name="menu_focusZoom" Header="Focus Zoom" Background="#222222" Foreground="White">
                        <MenuItem x:Name="Zoomx1" Header="x1" IsCheckable="True" IsChecked="{Binding LiveView}"  Background="#222222" Foreground="White" InputGestureText="Ctrl+1" Padding="0,0,20,0" Checked="Zoom1x_checked" Unchecked="Zoom1x_unchecked" Click="Zoom1x_checked" />
                        <MenuItem x:Name="Zoomx5" Header="x5" IsCheckable="True" IsChecked="{Binding LiveView}"  Background="#222222" Checked="Zoom5x_checked" Unchecked="Zoom5x_unchecked" Foreground="White" InputGestureText="Ctrl+2" Padding="0,0,20,0"/>
                        <MenuItem x:Name="Zoomx10" Header="x10" IsCheckable="True" IsChecked="{Binding LiveView}"  Background="#222222" Checked="Zoom10x_checked" Unchecked="Zoom10x_unchecked" Foreground="White" InputGestureText="Ctrl+3" Padding="0,0,20,0" />
                        <MenuItem x:Name="toggleZoom_menu" Header="Toggle Zoom" Padding="0,0,20,0" Click="toggelZoom"  Background="#222222" Foreground="White" InputGestureText="Ctrl+T" />
                    </MenuItem>

                    <MenuItem x:Name="overlayMenu_item" Header="Overlay" Background="#222222" Foreground="White" InputGestureText="Ctrl+H" Checked="ETg_Btn8_Checked" Unchecked="ETg_Btn8_Unchecked" IsCheckable="True" IsChecked="False"/>
                </MenuItem>
                <MenuItem x:Name="menu_edit" Header="Edit" Visibility="{Binding Branding.ShowSessionPanel, Converter={StaticResource BooleanToVisibilityConverter}}"  Padding="5,2" Margin="1" >
                    <MenuItem x:Name="btnUndo" Header="Undo" Click="UndoClick" Background="#222222" Foreground="White" InputGestureText="Ctrl+Z" />
                    <MenuItem x:Name="btnRedo" Header="Redo" Click="RedoClick" Background="#222222" Foreground="White" InputGestureText="Ctrl+R" />
                    <MenuItem  x:Name="menu_crop" Header="Crop" Background="#222222" Foreground="White" InputGestureText="Ctrl+L" Click="ETg_Btn9_Checked" />
                    <!--<MenuItem Header="Zoom +" Command="{Binding RefreshSessionCommand}" Background="#222222" Foreground="White" InputGestureText="Ctrl++"/>
                    <MenuItem Header="Zoom -" Command="{Binding ShowSessionCommand}" Background="#222222" Foreground="White" InputGestureText="Ctrl+-"/>-->

                    <!--<MenuItem Header="Pan" Command="{Binding SendCommand}" CommandParameter="NextSeries" InputGestureText="Ctrl+P" Background="#222222" Foreground="White"/>-->
                    <MenuItem x:Name="menu_rotate" Header="Rotate" Background="#222222" Foreground="White" InputGestureText="Shift+R" Click="ERotateRight_Click"/>

                    <!--<MenuItem Header="Add Watermark" Command="{Binding Path=ImportSessionCommand}" Background="#222222" Foreground="White" InputGestureText="Ctrl+W"/>-->
                </MenuItem>
                <MenuItem x:Name="MenuMode" Header="Mode" Padding="5,2" Margin="1" Visibility="{Binding Branding.ShowCameraMenu, Converter={StaticResource BooleanToVisibilityConverter}}" Foreground="white">
                    <MenuItem x:Name="mode360" Header="360"  Click="Mode_360Checked"  IsEnabled="False" Background="#222222" Foreground="White"/>
                    <MenuItem x:Name="modeSingle" Header="Single Shot"  Click="Mode_SingleChecked"  IsEnabled="True"  Background="#222222" Foreground="White"/>
                    <MenuItem x:Name="modeVideo" Header="Video"  Click="Mode_VideoChecked"  IsEnabled="True"  Background="#222222" Foreground="White"/>
                </MenuItem>
                <MenuItem Header="{T:TranslateExtension MenuHelp}" Visibility="{Binding Branding.OnlineReference, Converter={StaticResource BooleanToVisibilityConverter}}" Padding="5,2" Margin="1">
                    <MenuItem Header="Help Center" Command="{Binding ManualPageCommand}" Background="#222222" Foreground="White"/>
                    <!--<MenuItem Header="License" Command="{Binding HomePageCommand}" Background="#222222" Foreground="White"/>
                    <MenuItem Header="{T:TranslateExtension MenuAbout}" Command="{Binding AboutCommand}" Background="#222222" Foreground="White"/>-->
                </MenuItem>
            </Menu>



            <ToggleButton Grid.Row="0" Grid.Column="3" HorizontalAlignment="Right" Name="PanelButton" VerticalAlignment="Center" Grid.RowSpan="3" IsChecked="True"
                      Margin="0" Width="24" Height="24" Style="{StaticResource MaterialDesignFlatToggleButton}" Cursor="Hand" >
                <materialDesign:PackIcon Width="21" Height="21" Kind="DotsVertical" />
            </ToggleButton>


            <!--Visibility="{Binding Source={x:Static Member=Core:ServiceProvider.Branding}, Path=ShowRightPanelMainWindow, Converter={StaticResource BooleanToVisibilityConverter1}}"-->
            <!--<ScrollViewer HorizontalScrollBarVisibility="Hidden" VerticalScrollBarVisibility="Auto">-->
            <Grid Width="300" Grid.Column="3" Grid.Row="1" Grid.RowSpan="6"  Margin="0,0,15,3" 
                  Visibility="{Binding ElementName=PanelButton, Path=IsChecked , Converter={StaticResource BooleanToVisibilityConverter1}}" >
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition />
                </Grid.RowDefinitions>

                <!--<materialDesign:Card   VerticalAlignment="Top" DataContext="{Binding Source={x:Static Member=Core:ServiceProvider.Settings}}" Margin="4" 
                           Visibility="{Binding Source={x:Static Member=Core:ServiceProvider.Branding}, Path=ShowHistogram, Converter={StaticResource BooleanToVisibilityConverter1}}">
                    <Grid Margin="8">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="90" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Polygon Points="{Binding Path=SelectedBitmap.LuminanceHistogramPoints}" Stretch="Fill" Fill="LightGray" Opacity="0.5"/>
                        <Polygon Points="{Binding Path=SelectedBitmap.RedColorHistogramPoints}" Stretch="Fill" Stroke="Red" Opacity="0.5" />
                        <Polygon Points="{Binding Path=SelectedBitmap.GreenColorHistogramPoints}" Stretch="Fill" Stroke="LightGreen"  Opacity="0.5"/>
                        <Polygon Points="{Binding Path=SelectedBitmap.BlueColorHistogramPoints}" Stretch="Fill" Stroke="Blue" Opacity="0.5"/>
                        <Controls:ProgressRing IsActive="{Binding Path=ImageLoading}" VerticalAlignment="Center" HorizontalAlignment="Center"  Height="50" Width="50" />
                        <CheckBox Grid.Column="0" Height="20" HorizontalAlignment="Left" Margin="1" IsChecked="{Binding Path=HighlightUnderExp}" VerticalAlignment="Top" />
                        <CheckBox Height="20" Width="20" Margin="1"  IsChecked="{Binding Path=HighlightOverExp}" VerticalAlignment="Top" HorizontalAlignment="Right" HorizontalContentAlignment="Right"/>
                        <Label Grid.Row="1" Content="{Binding Source={x:Static Member=Core:ServiceProvider.Settings}, Path=SelectedBitmap.InfoLabel}" HorizontalContentAlignment="Center" Margin="0" Padding="0" HorizontalAlignment="Center" />
                    </Grid>
                </materialDesign:Card>-->
                <Grid Grid.Row="1" Margin="0" Visibility="Collapsed"  >
                    <ScrollViewer VerticalScrollBarVisibility="Auto" PanningMode="Both" PanningRatio="2">
                        <StackPanel>
                            <materialDesign:Card Margin="4">
                                <Expander Header="Preview" IsExpanded="True">
                                    <Image Source="{Binding Source={x:Static Member=Core:ServiceProvider.Settings}, Path=SelectedBitmap.Preview}" Height="185" MouseDown="Image_MouseDown" Name="PrviewImage" MouseMove="PrviewImage_MouseMove"  Margin="4">
                                        <Image.LayoutTransform>
                                            <RotateTransform  Angle="{Binding Source={x:Static Member=Core:ServiceProvider.Settings}, Path=SelectedBitmap.FileItem.RotationAngle}" />
                                        </Image.LayoutTransform>
                                    </Image>
                                </Expander>
                            </materialDesign:Card>
                            <!--<Border
                                Height="1"
                                HorizontalAlignment="Stretch"
                                Background="{DynamicResource MaterialDesignDivider}"
                                SnapsToDevicePixels="True" />-->
                            <materialDesign:Card Margin="4">
                                <Expander  VerticalAlignment="Top" IsExpanded="True" 
                                       Visibility="{Binding Source={x:Static Member=Core:ServiceProvider.Branding}, Path=ShowSessionPanel, Converter={StaticResource BooleanToVisibilityConverter1}}">
                                    <Expander.Header>
                                        <Grid>
                                            <TextBlock Text="{T:TranslateExtension Session}" VerticalAlignment="Center" FontSize="15"/>
                                            <Button Margin="0" VerticalAlignment="Center" HorizontalAlignment="Right" Style="{DynamicResource MaterialDesignFlatButton}" HorizontalContentAlignment="Right" Padding="0" 
                                                    Click="Button_Click_3">
                                                <materialDesign:PackIcon Width="20" Height="20" Kind="Settings" />
                                            </Button>
                                        </Grid>
                                    </Expander.Header>
                                    <StackPanel Orientation="Vertical">
                                        <Border Background="{DynamicResource MaterialDesignDivider}" Height="1" HorizontalAlignment="Stretch" SnapsToDevicePixels="True" />
                                        <Grid Margin="24,8,24,16" >
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto" />
                                                <RowDefinition Height="Auto" />
                                                <RowDefinition Height="Auto" />
                                                <RowDefinition Height="Auto" />
                                                <RowDefinition Height="Auto" />
                                                <RowDefinition Height="Auto" />
                                                <RowDefinition Height="Auto" />
                                            </Grid.RowDefinitions>
                                            <ComboBox Name="cmb_session" SelectedValue="{Binding Path=DefaultSession}" ItemsSource="{Binding Path=PhotoSessions}" ToolTip="{Binding Path=DefaultSession.Folder}"   Grid.ColumnSpan="2" 
                                                  Margin="4">
                                                <ComboBox.ItemTemplate>
                                                    <DataTemplate>
                                                        <StackPanel>
                                                            <StackPanel Orientation="Horizontal">
                                                                <Label Content="{Binding Path=Name}" FontWeight="Bold" FontSize="15" Padding="1"/>
                                                                <Label Content="(" Padding="1"/>
                                                                <Label Content="{Binding Path=Files.Count}" Padding="1" VerticalAlignment="Center"/>
                                                                <Label Content=")" Padding="1"/>
                                                            </StackPanel>
                                                            <Label Content="{Binding Path=Folder}" Padding="1"/>
                                                        </StackPanel>
                                                    </DataTemplate>
                                                </ComboBox.ItemTemplate>
                                            </ComboBox>

                                            <TextBox Grid.Row="2" Grid.Column="0"  Text="{Binding Path=DefaultSession.CaptureName, UpdateSourceTrigger=PropertyChanged}" Margin="4" Name="txt_CaptureName"
                                                 materialDesign:HintAssist.Hint="{T:TranslateExtension LabelCaptureName}"
                                                 Style="{StaticResource MaterialDesignFloatingHintTextBox}"/>

                                            <TextBox Grid.Row="3" Text="{Binding Path=DefaultSession.Series}" Margin="4" VerticalAlignment="Top"
                                                 materialDesign:HintAssist.Hint="{T:TranslateExtension LabelSeries}"
                                                 Style="{StaticResource MaterialDesignFloatingHintTextBox}"/>
                                        </Grid>
                                    </StackPanel>
                                </Expander>
                            </materialDesign:Card>
                            <materialDesign:Card Margin="4" Visibility="{Binding  Path=DefaultSession.AlowFolderChange, Converter={StaticResource BooleanToVisibilityConverter1}}">
                                <Expander Header="{T:TranslateExtension LabelFolderSelector}" VerticalAlignment="Top" IsExpanded="False"  MaxHeight="200">
                                    <StackPanel Orientation="Vertical">
                                        <Border Background="{DynamicResource MaterialDesignDivider}" Height="1" HorizontalAlignment="Stretch" SnapsToDevicePixels="True" />
                                        <Panels:DirectorySelectorControl SelectedPath="{Binding Path=DefaultSession.Folder, Mode=TwoWay}" Margin="24,8,24,16"/>
                                    </StackPanel>
                                </Expander>
                            </materialDesign:Card>
                            <materialDesign:Card Margin="4">
                                <Expander  Header="{T:TranslateExtension LabelAutoExportPlugins}" VerticalAlignment="Top" IsExpanded="True" Margin="0" Visibility="{Binding Source={x:Static Member=Core:ServiceProvider.Branding}, Path=ShowAutoExportPanel, Converter={StaticResource BooleanToVisibilityConverter1}}">
                                    <StackPanel Orientation="Vertical">
                                        <Border Background="{DynamicResource MaterialDesignDivider}" Height="1" HorizontalAlignment="Stretch" SnapsToDevicePixels="True" />
                                        <StackPanel Orientation="Vertical" Margin="24,8,24,16">
                                            <ListBox Margin="4" ItemsSource="{Binding DefaultSession.AutoExportPluginConfigs}" MaxHeight="200"  dragDrop:DragDrop.IsDragSource="True" dragDrop:DragDrop.IsDropTarget="True" HorizontalContentAlignment="Stretch">
                                                <ListBox.ItemTemplate>
                                                    <DataTemplate>
                                                        <Grid IsEnabled="{Binding IsRedy}" >
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="*"/>
                                                                <ColumnDefinition Width="30"/>
                                                            </Grid.ColumnDefinitions>
                                                            <CheckBox Content="{Binding DisplayName}" IsChecked="{Binding IsEnabled}"/>
                                                            <materialDesign:PopupBox Grid.Column="1" PlacementMode="BottomAndAlignRightEdges" StaysOpen="False" HorizontalAlignment="Right" VerticalAlignment="Top"  PopupMode="Click">
                                                                <StackPanel>
                                                                    <Button Content="Delete" Command="{Binding Source={x:Static Member=Core:ServiceProvider.Settings}, Path=DefaultSession.RemovePluginCommand}" CommandParameter="{Binding}"/>
                                                                    <Button Content="Settings" Command="{Binding ConfigurePluginCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type my:MainWindowAdvanced}}}" CommandParameter="{Binding}"/>
                                                                    <Button Content="Execute"  Command="{Binding Source={x:Static Member=Core:ServiceProvider.Settings}, Path=DefaultSession.ApplyPluginCommand}" CommandParameter="{Binding}"/>
                                                                </StackPanel>
                                                            </materialDesign:PopupBox>
                                                        </Grid>
                                                    </DataTemplate>
                                                </ListBox.ItemTemplate>
                                            </ListBox>
                                            <Controls:DropDownButton Name="DownButton" Padding="0" Margin="4" VerticalContentAlignment="Center" Content="{T:TranslateExtension LabelAddPlugin}" DisplayMemberPath="Name" 
                                                             ItemsSource="{Binding Source={x:Static Member=Core:ServiceProvider.PluginManager}, Path=AutoExportPlugins}">
                                                <Controls:DropDownButton.ItemContainerStyle>
                                                    <Style TargetType="MenuItem">
                                                        <Setter Property="Command" Value="{Binding AddPluginCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type my:MainWindowAdvanced}}}"/>
                                                        <Setter Property="CommandParameter" Value="{Binding}"/>
                                                    </Style>
                                                </Controls:DropDownButton.ItemContainerStyle>
                                                <Controls:DropDownButton.Icon>
                                                    <Rectangle Width="20" Height="20">
                                                        <Rectangle.Fill>
                                                            <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_add}" />
                                                        </Rectangle.Fill>
                                                    </Rectangle>
                                                </Controls:DropDownButton.Icon>
                                            </Controls:DropDownButton>
                                        </StackPanel>
                                    </StackPanel>
                                </Expander>
                            </materialDesign:Card>
                            <materialDesign:Card Margin="4">
                                <Expander  Header="{T:TranslateExtension MenuPresets}" VerticalAlignment="Top" IsExpanded="False" Margin="0" Padding="0" IsEnabled="{Binding Source={x:Static Member=Core:ServiceProvider.DeviceManager}, Path=SelectedCameraDevice.IsConnected}" 
                                       Visibility="{Binding Source={x:Static Member=Core:ServiceProvider.Branding}, Path=ShowPresetPanel, Converter={StaticResource BooleanToVisibilityConverter1}}">
                                    <StackPanel Orientation="Vertical">
                                        <Border Background="{DynamicResource MaterialDesignDivider}" Height="1" HorizontalAlignment="Stretch" SnapsToDevicePixels="True" />
                                        <StackPanel Margin="24,8,24,16">
                                            <ListBox MaxHeight="100" ItemsSource="{Binding Source={x:Static Member=Core:ServiceProvider.Settings}, Path=CameraPresets}" Name="PresetListBox" Margin="3">

                                            </ListBox>
                                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                                <Button  ToolTip="{T:TranslateExtension SavePresetWindowTitle}" Height="35" Width="35" Margin="0" Style="{DynamicResource MetroCircleButtonStyle}" Click="Button_Click_1">
                                                    <Rectangle Width="15" Height="15">
                                                        <Rectangle.Fill>
                                                            <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_save}" />
                                                        </Rectangle.Fill>
                                                    </Rectangle>
                                                </Button>
                                                <Button  ToolTip="{T:TranslateExtension MenuPresetsLoad}" Height="35" Width="35" Margin="0" Style="{DynamicResource MetroCircleButtonStyle}" Command="{Binding Path=SelectPresetCommand, RelativeSource={RelativeSource FindAncestor, AncestorType=my:MainWindowAdvanced, AncestorLevel=1}}" 
                                        CommandParameter="{Binding ElementName=PresetListBox, Path=SelectedItem}">
                                                    <Rectangle Width="15" Height="15">
                                                        <Rectangle.Fill>
                                                            <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_upload}" />
                                                        </Rectangle.Fill>
                                                    </Rectangle>
                                                </Button>
                                                <Button  ToolTip="{T:TranslateExtension ButtonDeletePreset}" Height="35" Width="35" Margin="0" Style="{DynamicResource MetroCircleButtonStyle}" Command="{Binding Path=DeletePresetCommand, RelativeSource={RelativeSource FindAncestor, AncestorType=my:MainWindowAdvanced, AncestorLevel=1}}" 
                                        CommandParameter="{Binding ElementName=PresetListBox, Path=SelectedItem}">
                                                    <Rectangle Width="15" Height="15">
                                                        <Rectangle.Fill>
                                                            <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_delete}" />
                                                        </Rectangle.Fill>
                                                    </Rectangle>
                                                </Button>
                                                <Button  ToolTip="{T:TranslateExtension SavePresetWindowTitle}" Height="35" Width="35" Margin="0" Style="{DynamicResource MetroCircleButtonStyle}" 
                                                         Click="Button_Click_2">
                                                    <Rectangle Width="15" Height="15">
                                                        <Rectangle.Fill>
                                                            <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_edit}" />
                                                        </Rectangle.Fill>
                                                    </Rectangle>
                                                </Button>
                                                <Button  ToolTip="{T:TranslateExtension LabelLoadPresetAllCamera}" Height="35" Width="35" Margin="0" Style="{DynamicResource MetroCircleButtonStyle}"  Command="{Binding Path=LoadInAllPresetCommand, RelativeSource={RelativeSource FindAncestor, AncestorType=my:MainWindowAdvanced, AncestorLevel=1}}" 
                                        CommandParameter="{Binding ElementName=PresetListBox, Path=SelectedItem}">
                                                    <Rectangle Width="15" Height="15">
                                                        <Rectangle.Fill>
                                                            <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_elevator_up}" />
                                                        </Rectangle.Fill>
                                                    </Rectangle>
                                                </Button>
                                                <Button  ToolTip="{T:TranslateExtension LabelVerifyPreset}" Height="35" Width="35" Margin="0" Style="{DynamicResource MetroCircleButtonStyle}"  Command="{Binding Path=VerifyPresetCommand, RelativeSource={RelativeSource FindAncestor, AncestorType=my:MainWindowAdvanced, AncestorLevel=1}}" 
                                        CommandParameter="{Binding ElementName=PresetListBox, Path=SelectedItem}">
                                                    <Rectangle Width="15" Height="15">
                                                        <Rectangle.Fill>
                                                            <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_checkmark_pencil}" />
                                                        </Rectangle.Fill>
                                                    </Rectangle>
                                                </Button>
                                            </StackPanel>
                                        </StackPanel>
                                    </StackPanel>
                                </Expander>
                            </materialDesign:Card>
                            <materialDesign:Card Margin="4">
                                <Expander  Header="{T:TranslateExtension LabelImageProperties}" VerticalAlignment="Top" IsExpanded="False"  Margin="0" Padding="0"
                                Visibility="{Binding Source={x:Static Member=Core:ServiceProvider.Branding}, Path=ShowImagePropertiesPanel, Converter={StaticResource BooleanToVisibilityConverter1}}">
                                    <StackPanel Orientation="Vertical">
                                        <Border Background="{DynamicResource MaterialDesignDivider}" Height="1" HorizontalAlignment="Stretch" SnapsToDevicePixels="True" />
                                        <Panels:ImagePropertiesControl DataContext="{Binding Source={x:Static Member=Core:ServiceProvider.Settings}}" Height="250" Margin="24,8,24,16"/>
                                    </StackPanel>
                                </Expander>
                            </materialDesign:Card>
                            <materialDesign:Card Margin="4">
                                <Expander  Header="{T:Translate LabelMetadata}" VerticalAlignment="Top" IsExpanded="False"  Margin="0" Padding="0"
                                       Visibility="{Binding Source={x:Static Member=Core:ServiceProvider.Branding}, Path=ShowMetadataPanel, Converter={StaticResource BooleanToVisibilityConverter1}}">
                                    <StackPanel Orientation="Vertical">
                                        <Border Background="{DynamicResource MaterialDesignDivider}" Height="1" HorizontalAlignment="Stretch" SnapsToDevicePixels="True" />
                                        <Panels:MetadataControl DataContext="{Binding Source={x:Static Core:ServiceProvider.Settings}}" Height="250" HorizontalContentAlignment="Stretch" Margin="24,8,24,16"/>
                                    </StackPanel>
                                </Expander>
                            </materialDesign:Card>
                        </StackPanel>
                    </ScrollViewer>
                </Grid>
            </Grid>
            <!--</ScrollViewer>-->

            <materialDesign:Snackbar
            Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="4" 
            IsActive="{Binding Source={x:Static Member=Devices:StaticHelper.Instance}, Path=IsActive}">
                <materialDesign:SnackbarMessage Content="{Binding Source={x:Static Member=Devices:StaticHelper.Instance}, Path=SystemMessage}" />
            </materialDesign:Snackbar>
        </Grid>
        <Grid>
            <Grid.ColumnDefinitions>
                <!--<ColumnDefinition Width="{Binding ActualWidth, ElementName=controler2}"/>-->
                <ColumnDefinition Width="0"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Grid  Grid.Column="1">
                <TabControl x:Name="MainTabControl" SelectionChanged="MainTabControl_SelectionChanged" >
                    <TabControl.Resources>
                        <ControlTemplate x:Key="ComboBoxToggleButton" TargetType="{x:Type ToggleButton}">
                            <Grid Grid.Column="1">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition />
                                    <ColumnDefinition Width="20" />
                                </Grid.ColumnDefinitions>
                                <Border x:Name="Border" Grid.ColumnSpan="2" CornerRadius="0" Background="#2e2f30" BorderBrush="#7f8486" BorderThickness="0,0,0,1" />
                                <Border Grid.Column="0" CornerRadius="0" Margin="0" Background="#2e2f30" BorderBrush="#7f8486" BorderThickness="0,0,0,1" />
                                <Path x:Name="Arrow" Grid.Column="1" Fill="White" HorizontalAlignment="Center" VerticalAlignment="Center" Data="M0,0 L0,2 L4,6 L8,2 L8,0 L4,4 z"/>
                            </Grid>
                        </ControlTemplate>
                        <ControlTemplate x:Key="ComboBoxTextBox" TargetType="{x:Type TextBox}">
                            <Border x:Name="PART_ContentHost" Focusable="False" Background="{TemplateBinding Background}" />
                        </ControlTemplate>
                        <Style x:Key="{x:Type ComboBox}" TargetType="{x:Type ComboBox}">
                            <Setter Property="SnapsToDevicePixels" Value="true"/>
                            <Setter Property="OverridesDefaultStyle" Value="true"/>
                            <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto"/>
                            <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto"/>
                            <Setter Property="ScrollViewer.CanContentScroll" Value="true"/>
                            <Setter Property="MinWidth" Value="120"/>
                            <Setter Property="MinHeight" Value="20"/>
                            <Setter Property="Foreground" Value="White"/>
                            <Setter Property="FontWeight" Value="500" />
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="{x:Type ComboBox}">
                                        <Grid>
                                            <ToggleButton x:Name="ToggleButton" Template="{StaticResource ComboBoxToggleButton}" Grid.Column="2" Focusable="false" IsChecked="{Binding Path=IsDropDownOpen,Mode=TwoWay,RelativeSource={RelativeSource TemplatedParent}}" ClickMode="Press" />
                                            <ContentPresenter x:Name="ContentSite" IsHitTestVisible="False"  Content="{TemplateBinding SelectionBoxItem}" ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}" ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}" Margin="3,3,23,3" VerticalAlignment="Center" HorizontalAlignment="Left" />
                                            <TextBox x:Name="PART_EditableTextBox" Style="{x:Null}" Template="{StaticResource ComboBoxTextBox}" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="3,3,23,3" Focusable="True" Background="Transparent" Foreground="White" FontSize="11px" Visibility="Hidden" IsReadOnly="{TemplateBinding IsReadOnly}"/>
                                            <Popup x:Name="Popup" Placement="Bottom" IsOpen="{TemplateBinding IsDropDownOpen}" AllowsTransparency="True" Focusable="False" PopupAnimation="Slide">
                                                <Grid x:Name="DropDown" SnapsToDevicePixels="True" MinWidth="{TemplateBinding ActualWidth}" MaxHeight="{TemplateBinding MaxDropDownHeight}">
                                                    <Border x:Name="DropDownBorder" Background="#FF3F3F3F" BorderThickness="1" BorderBrush="#888888"/>
                                                    <ScrollViewer Margin="4,6,4,6" SnapsToDevicePixels="True">
                                                        <StackPanel IsItemsHost="True" KeyboardNavigation.DirectionalNavigation="Contained" />
                                                    </ScrollViewer>
                                                </Grid>
                                            </Popup>
                                        </Grid>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="HasItems" Value="false">
                                                <Setter TargetName="DropDownBorder" Property="MinHeight" Value="95"/>
                                            </Trigger>
                                            <Trigger Property="IsEnabled" Value="false">
                                                <Setter Property="Foreground" Value="#888888"/>
                                            </Trigger>
                                            <Trigger Property="IsGrouping" Value="true">
                                                <Setter Property="ScrollViewer.CanContentScroll" Value="false"/>
                                            </Trigger>
                                            <Trigger SourceName="Popup" Property="Popup.AllowsTransparency" Value="true">
                                                <Setter TargetName="DropDownBorder" Property="CornerRadius" Value="0"/>
                                                <Setter TargetName="DropDownBorder" Property="Margin" Value="0,2,0,0"/>
                                            </Trigger>
                                            <Trigger Property="IsEditable"  Value="true">
                                                <Setter Property="IsTabStop" Value="false"/>
                                                <Setter TargetName="PART_EditableTextBox" Property="Visibility" Value="Visible"/>
                                                <Setter TargetName="ContentSite" Property="Visibility" Value="Hidden"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                        <Style x:Key="{x:Type ComboBoxItem}" TargetType="{x:Type ComboBoxItem}">
                            <Setter Property="SnapsToDevicePixels" Value="true"/>
                            <Setter Property="Foreground" Value="White"/>
                            <Setter Property="OverridesDefaultStyle" Value="true"/>
                            <Setter Property="FontWeight" Value="500" />
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="{x:Type ComboBoxItem}">
                                        <Border x:Name="Border" Padding="2" SnapsToDevicePixels="true">
                                            <ContentPresenter />
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsHighlighted" Value="true">
                                                <Setter TargetName="Border" Property="Background" Value="#FF4F4F4F"/>
                                            </Trigger>
                                            <Trigger Property="IsEnabled" Value="false">
                                                <Setter Property="Foreground" Value="#888888"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                        <Style TargetType="{x:Type TabPanel}">
                            <Setter Property="HorizontalAlignment" Value="Center" />
                        </Style>
                        <Style TargetType="TabItem">
                            <Setter Property="TextElement.Foreground" Value="#7f8486"/>
                            <Setter Property="Control.FontFamily" Value="Roboto" />
                            <Setter Property="Control.FontSize" Value="17" />
                            <Setter Property="Control.FontWeight" Value="900" />
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="TabItem">
                                        <Border x:Name="Border" BorderThickness="0,0,0,1" BorderBrush="#7f8486" Margin="0,0">
                                            <ContentPresenter x:Name="ContentSite" VerticalAlignment="Center" HorizontalAlignment="Center" ContentSource="Header" Margin="10,2"/>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsSelected" Value="True">
                                                <Setter TargetName="Border" Property="BorderBrush" Value="#007aff" />
                                                <Setter Property="TextElement.Foreground" Value="#007aff"/>
                                            </Trigger>
                                            <Trigger Property="IsSelected" Value="False">
                                                <Setter TargetName="Border" Property="BorderBrush" Value="#7f8486" />
                                                <Setter Property="TextElement.Foreground" Value="#7f8486"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </TabControl.Resources>

                    <TabItem x:Name="CaptureTab" IsEnabled="True" FontFamily="roboto" Height="50px" Width="150px" Header="Capture" IsSelected="True" >
                        <Grid Background="#2e2f30" Margin="-3">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" MinWidth="260"/>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" MinWidth="260" />
                            </Grid.ColumnDefinitions>

                            <UniformGrid Columns="3">
                                <FrameworkElement x:Name="c1"/>
                                <!-- no need to add the other three -->
                            </UniformGrid>
                            <TabControl x:Name="ModeTabControl" IsEnabled="True" Grid.Column="0" Background="#2e2f30" BorderThickness="0" SelectionChanged="TabControl_SelectionChanged" Width="260">
                                <TabItem x:Name="tab_360" FontFamily="roboto" Header="360" Height="40" FontSize="13" Width="{Binding ElementName=c1, Path=ActualWidth}">
                                    <DockPanel LastChildFill="True">
                                        <TextBlock DockPanel.Dock="Top" Text="Camera Parameter" Margin="8" Style="{StaticResource Sub_Heading_Title}"></TextBlock>
                                        <local:Controler x:Name="controler1" DataContext="{Binding Source={x:Static Core:ServiceProvider.DeviceManager}}" IsEnabled="{Binding SelectedCameraDevice.IsConnected, Source={x:Static Core:ServiceProvider.DeviceManager}}" Margin="0" Padding="0" Visibility="Hidden" Width="260" />
                                    </DockPanel>
                                </TabItem>
                                <TabItem x:Name="tab_Single" FontFamily="roboto" Header="Single" Height="40" FontSize="13" Width="{Binding ElementName=c1, Path=ActualWidth}">
                                    <DockPanel LastChildFill="True">
                                        <TextBlock DockPanel.Dock="Top" Text="Camera Parameter" Margin="8" Style="{StaticResource Sub_Heading_Title}"></TextBlock>
                                        <local:Controler x:Name="controler2" DataContext="{Binding Source={x:Static Core:ServiceProvider.DeviceManager}}" IsEnabled="{Binding SelectedCameraDevice.IsConnected, Source={x:Static Core:ServiceProvider.DeviceManager}}" Margin="0" Padding="0" Visibility="Hidden" Width="260" />
                                    </DockPanel>
                                </TabItem>
                                <TabItem x:Name="tab_video" FontFamily="roboto" Header="Video" Height="40" FontSize="13" Width="{Binding ElementName=c1, Path=ActualWidth}">
                                    <DockPanel LastChildFill="True">
                                        <TextBlock DockPanel.Dock="Top" Text="Camera Parameter" Margin="8" Style="{StaticResource Sub_Heading_Title}"></TextBlock>
                                        <local1:LVControlerSimple x:Name="LVCSimple1" DataContext="{Binding Source={x:Static Core:ServiceProvider.DeviceManager}}"  IsEnabled="{Binding SelectedCameraDevice.IsConnected, Source={x:Static Core:ServiceProvider.DeviceManager}}" Visibility="Hidden" Width="260" />
                                    </DockPanel>
                                </TabItem>
                            </TabControl>

                            <Grid x:Name="grd_bg" Grid.Column="1" Background="#131415" >
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="auto" MinHeight="76"/>
                                    <RowDefinition Height="*" />
                                    <RowDefinition Height="auto" MinHeight="150" />
                                </Grid.RowDefinitions>

                                <StackPanel x:Name="Pnl_ToggleButton" Grid.Row="0" HorizontalAlignment="Left" Margin="15,15,0,0" >
                                    <Border BorderThickness="1,1,1,0" BorderBrush="#535657" CornerRadius="2" >
                                        <ComboBox x:Name="cmb_Zoom" Width="63" Height="24" FontSize="12" FontWeight="Bold" SelectedIndex="0" MinWidth="40" Foreground="#FFDDDBDB"
                                              HorizontalAlignment="Center" VerticalAlignment="Center" HorizontalContentAlignment="Right" VerticalContentAlignment="Center" SelectionChanged="cmb_Zoom_SelectionChanged" >
                                            <ComboBoxItem Content="100%" Width="45" />
                                            <ComboBoxItem Content="90%" Width="45" />
                                            <ComboBoxItem Content="80%" Width="45" />
                                            <ComboBoxItem Content="70%" Width="45" />
                                            <ComboBoxItem Content="60%" Width="45" />
                                            <ComboBoxItem Content="50%" Width="45" />
                                            <ComboBoxItem Content="Auto" Width="45" IsSelected="True" />
                                        </ComboBox>
                                    </Border>
                                </StackPanel>

                                <Grid x:Name="grd_ToggleButton"  Grid.Row="0" Grid.RowSpan="2" HorizontalAlignment="Center" >
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="15" />
                                        <RowDefinition Height="auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="auto"/>
                                        <ColumnDefinition Width="auto"/>
                                        <ColumnDefinition Width="auto"/>
                                        <ColumnDefinition Width="auto"/>
                                        <ColumnDefinition Width="auto"/>
                                    </Grid.ColumnDefinitions>


                                    <StackPanel Grid.Row="1" Grid.Column="1" Margin="0,0,30,0" Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Top" >
                                        <ToggleButton x:Name="Tg_Btn5" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="0,0,30,0" Height="20" Width="20" BorderThickness="0" 
                                                      Style="{StaticResource tb_style}" Unchecked="Tg_Btn5_Unchecked" Checked="Tg_Btn5_Checked" >
                                            <ToggleButton.Background>
                                                <ImageBrush ImageSource="Assets/Images/none/search.png"/>
                                            </ToggleButton.Background>
                                        </ToggleButton>
                                        <ToggleButton x:Name="Tg_Btn6" Margin="0,0,10,0" Width="27" BorderThickness="0" Style="{StaticResource Vertical_Style}" IsChecked="False" Checked="Tg_Btn6_Checked" Unchecked="Tg_Btn6_Unchecked">
                                            <ToggleButton.Background>
                                                <ImageBrush ImageSource="Assets/Images/none/combineda.png"/>
                                            </ToggleButton.Background>
                                        </ToggleButton>
                                        <ToggleButton x:Name="Tg_Btn7" Height="20" Width="27" BorderThickness="0" Style="{StaticResource Horiz_Style}" IsChecked="False" Checked="Tg_Btn7_Checked" Unchecked="Tg_Btn7_Unchecked"  >
                                            <ToggleButton.Background>
                                                <ImageBrush ImageSource="Assets/Images/none/combinedb.png"/>
                                            </ToggleButton.Background>
                                        </ToggleButton>
                                    </StackPanel>
                                    <StackPanel Grid.Row="1" Grid.Column="2" Orientation="Horizontal" Margin="0,0,30,0" HorizontalAlignment="Center" VerticalAlignment="Top" >
                                        <RadioButton x:Name="CGrid0" Margin="0,0,10,0" Background="Transparent" GroupName="CGGroup" IsChecked="True" Style="{StaticResource ToolboxRadioSelector1}" />
                                        <RadioButton x:Name="CGrid1" Margin="0,0,10,0" Background="Transparent" GroupName="CGGroup" IsChecked="False" Click="grid2_Checked" Unchecked="grid2_Unchecked" Style="{StaticResource ToolboxRadioSelector2}"  />
                                        <RadioButton x:Name="CGrid2" Margin="0,0,10,0" Background="Transparent" GroupName="CGGroup" IsChecked="False" Click="grid3_Checked" Unchecked="grid3_Unchecked" Style="{StaticResource ToolboxRadioSelector3}"  />
                                        <RadioButton x:Name="CGrid3" Margin="0,0,0,0" Background="Transparent" GroupName="CGGroup" IsChecked="False" Click="grid4_Checked" Unchecked="grid4_Unchecked" Style="{StaticResource ToolboxRadioSelector4}"  />
                                    </StackPanel>
                                    <StackPanel Grid.Row="1" Grid.Column="3" Orientation="Horizontal" Margin="0,0,30,0" HorizontalAlignment="Center" VerticalAlignment="Top" >
                                        <!--<RadioButton x:Name="ratio1" Margin="0,0,10,0" Checked="ratio1_Checked" Unchecked="ratio1_Unchecked" Background="Transparent" GroupName="CRGroup" Style="{StaticResource ToolboxRadioSelector5}"/>-->
                                        <!--<RadioButton x:Name="ratio2" Margin="0,0,10,0" Checked="ratio2_Checked" Unchecked="ratio2_Unchecked" Background="Transparent" GroupName="CRGroup" Style="{StaticResource ToolboxRadioSelector6}"/>-->
                                        <!--<RadioButton x:Name="ratio3" Margin="0,0,0,0" Checked="ratio3_Checked" Unchecked="ratio3_Unchecked" Background="Transparent" GroupName="CRGroup" Style="{StaticResource ToolboxRadioSelector7}" />-->
                                        <ToggleButton x:Name="ratio1" Margin="0,0,10,0" Checked="ratio1_Checked" Unchecked="ratio1_Unchecked" Style="{StaticResource Ratio11}" Width="25" Height="22">
                                            <ToggleButton.Background>
                                                <ImageBrush ImageSource="Assets/Images/none/asset-13-copy.png"/>
                                            </ToggleButton.Background>
                                        </ToggleButton>
                                        <ToggleButton x:Name="ratio2" Margin="0,0,10,0" Checked="ratio2_Checked" Unchecked="ratio2_Unchecked" Style="{StaticResource Ratio43}" Width="26" Height="22">
                                            <ToggleButton.Background>
                                                <ImageBrush ImageSource="Assets/Images/none/combinedc.png"/>
                                            </ToggleButton.Background>
                                        </ToggleButton>
                                        <ToggleButton x:Name="ratio3" Margin="0,0,0,0" Checked="ratio3_Checked" Unchecked="ratio3_Unchecked" Style="{StaticResource Ratio169}" Width="27" Height="22">
                                            <ToggleButton.Background>
                                                <ImageBrush ImageSource="Assets/Images/none/asset-11-copy.png"/>
                                            </ToggleButton.Background>
                                        </ToggleButton>
                                    </StackPanel>
                                    <!--<StackPanel Grid.Row="1" Grid.Column="4" HorizontalAlignment="Center" VerticalAlignment="Top" >
                                        <ToggleButton x:Name="Tg_Btnbg" Width="40" Height="22" BorderThickness="0" Style="{StaticResource bg_Style}" IsChecked="False" >
                                            <ToggleButton.Background>
                                                <ImageBrush ImageSource="Assets/Images/none/bg_1.png"/>
                                            </ToggleButton.Background>
                                        </ToggleButton>
                                    </StackPanel>-->
                                    <StackPanel Grid.Row="1" Grid.Column="4" HorizontalAlignment="Center" VerticalAlignment="Top" >
                                        <Button x:Name="Tg_Btnbg" Width="40" Height="22" BorderThickness="0" Click="Tg_Btnbg_Click" MouseEnter="Tg_Btnbg_MouseEnter" MouseLeave="Tg_Btnbg_MouseLeave">
                                            <Button.Background>
                                                <ImageBrush ImageSource="Assets/Images/none/bg_1.png"/>
                                            </Button.Background>
                                        </Button>
                                    </StackPanel>

                                    <Border Grid.Row="2" Grid.Column="1" x:Name="slidezoom" Width="121" Height="26" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,5,0,0"
                                            Visibility="{Binding IsChecked, ElementName=Tg_Btn5, Converter={StaticResource BooleanToVisibilityConverter1}}" Background="#2e2f30" >
                                        <Slider x:Name="sldZoom" Style="{StaticResource Horizontal_Slider}" IsSnapToTickEnabled="True" Width="100" Background="#131415" VerticalAlignment="Center" 
                                                Maximum="50" Minimum="0" ValueChanged="Slider_ValueChanged" />
                                    </Border>
                                    <Border x:Name="brd_bg" Grid.Row="2" Grid.Column="3" Grid.ColumnSpan="2" HorizontalAlignment="Right" VerticalAlignment="Center" Height="26" Margin="0,5,0,0" 
                                            Visibility="Collapsed" Background="#2e2f30" >
                                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center" >
                                            <Button x:Name="btn_bg_3" Content="" Width="10" Height="10" Margin="5" Background="Black" Click="btn_bg_3_Click" />
                                            <Button x:Name="btn_bg_2" Content="" Width="10" Height="10" Margin="5" Background="Gray" Click="btn_bg_2_Click" />
                                            <Button x:Name="btn_bg_1" Content="" Width="10" Height="10" Margin="5" Background="White" Click="btn_bg_1_Click" />
                                        </StackPanel>
                                    </Border>
                                </Grid>

                                <Grid x:Name="grd_CameraGrid" Grid.Row="1" Margin="70,0,70,0">
                                    <Grid x:Name="CameraGrid" >
                                        <local1:LVControler Visibility="Collapsed" x:Name="myLVControler" Grid.Row="0" Grid.Column="0" Background="Transparent" 
                                        Width="{Binding ActualWidth, ElementName=CameraGrid}" Height="{Binding ActualHeight, ElementName=CameraGrid}"  />

                                        <Line x:Name="CV_Line1" VerticalAlignment="Stretch" HorizontalAlignment="Center" Stroke="Black" Fill="Black" StrokeThickness="2" />
                                        <Line x:Name="CH_Line1" VerticalAlignment="Center" HorizontalAlignment="Stretch" Stroke="Black" Fill="Black" StrokeThickness="2"/>
                                        <Line x:Name="CVG_Line1" VerticalAlignment="Stretch" Grid.RowSpan="2" Stroke="Black" Fill="Black" StrokeThickness="2"/>
                                        <Line x:Name="CVG_Line2" VerticalAlignment="Stretch" Grid.RowSpan="2" Stroke="Black" Fill="Black" StrokeThickness="2"/>
                                        <Line x:Name="CVG_Line3" VerticalAlignment="Stretch" Grid.RowSpan="2" Stroke="Black" Fill="Black" StrokeThickness="2"/>
                                        <Line x:Name="CVG_Line4" VerticalAlignment="Stretch" Grid.RowSpan="2" Stroke="Black" Fill="Black" StrokeThickness="2"/>
                                        <Line x:Name="CVG_Line5" VerticalAlignment="Stretch" Grid.RowSpan="2" Stroke="Black" Fill="Black" StrokeThickness="2"/>
                                        <Line x:Name="CHG_Line1" HorizontalAlignment="Stretch" Grid.ColumnSpan="2" Stroke="Black" Fill="Black" StrokeThickness="2"/>
                                        <Line x:Name="CHG_Line2" HorizontalAlignment="Stretch" Grid.ColumnSpan="2" Stroke="Black" Fill="Black" StrokeThickness="2"/>
                                        <Line x:Name="CHG_Line3" HorizontalAlignment="Stretch" Grid.ColumnSpan="2" Stroke="Black" Fill="Black" StrokeThickness="2"/>
                                    </Grid>
                                    <Image x:Name="_NoImage" Grid.Row="0" Grid.Column="0" Visibility="Visible" Source="NoImage.png" Stretch="UniformToFill" />
                                </Grid>

                                <Grid x:Name="buyPremium" Panel.ZIndex="5" Visibility="Collapsed" Grid.Column="0" Grid.ColumnSpan="3"  Grid.RowSpan="3" Focusable="True">
                                    <TextBlock Foreground="#00000000" Margin="10">Please Purchase.</TextBlock>
                                    <TextBlock TextAlignment="Center"  Foreground="#ffffff" Margin="200,267,199.6,199.8">Your trail period of 30 days is over. Please Purchase.</TextBlock>
                                    <Button Name="purchaseButton" Click="purchaseButton_Click" Width="150">Purchase Premium</Button>
                                </Grid>
                                <Grid x:Name="grd_downbutton" IsEnabled="True" Grid.Row="2" Background="#131415" >
                                    <StackPanel Margin="0,0,0,0" HorizontalAlignment="Center" VerticalAlignment="Center">
                                        <Button ToolTip="{T:TranslateExtension CapturePhotoToolTip}"  Width="80" Height="80" Name="button3" Margin="4" BorderThickness="0" BorderBrush="Transparent" 
                                            IsEnabled="{Binding Source={x:Static Member=Core:ServiceProvider.DeviceManager}, Path=SelectedCameraDevice.IsConnected}" materialDesign:ButtonProgressAssist.IsIndicatorVisible="True" materialDesign:ButtonProgressAssist.Value="{Binding Source={x:Static Core:ServiceProvider.DeviceManager}, Path=SelectedCameraDevice.TransferProgress}" 
                                            Click="button3_Click">
                                            <Button.Background>
                                                <ImageBrush Stretch="None" ImageSource="/DSLRPCToolSub/Assets/Images/none/Group 13 Copy 2.png"/>
                                            </Button.Background>
                                        </Button>
                                        <!--<Button Content="Lv" ToolTip="{T:TranslateExtension LiveViewToolTip}" Height="40" Name="btn_liveview" Width="40" Margin="4" Command="{Binding Source={x:Static Member=myClasess:WpfCommands.ShowLiveViewCommand}}" 
                                                CommandParameter="{Binding Source={x:Static Member=Core:ServiceProvider.DeviceManager}, Path=SelectedCameraDevice}" FontSize="15" Style="{StaticResource MaterialDesignFloatingActionLightButton}" />-->
                                        <Button Visibility="Collapsed" ToolTip="{T:TranslateExtension LiveViewToolTip}" Width="80" Height="80" Name="btn_liveview" Margin="4"  BorderThickness="0" BorderBrush="Transparent" 
                                                IsEnabled="{Binding Source={x:Static Member=Core:ServiceProvider.DeviceManager}, Path=SelectedCameraDevice.IsConnected}" materialDesign:ButtonProgressAssist.IsIndicatorVisible="True" materialDesign:ButtonProgressAssist.Value="{Binding Source={x:Static Core:ServiceProvider.DeviceManager}, Path=SelectedCameraDevice.TransferProgress}" 
                                                Click="btn_liveview_Click">
                                            <Button.Background>
                                                <ImageBrush Stretch="None" ImageSource="/DSLRPCToolSub/Assets/Images/none/Group 13 Copy.png"/>
                                            </Button.Background>
                                        </Button>
                                        <!--Command="{Binding Source={x:Static  Member=myClasess:WpfCommands.ShowLiveViewCommand}}" 
                                                CommandParameter="{Binding Source={x:Static Member=Core:ServiceProvider.DeviceManager}, Path=SelectedCameraDevice}"-->
                                    </StackPanel>
                                </Grid>
                            </Grid>

                            <Border Grid.Column="2" Background="#2e2f30"  BorderThickness="1" BorderBrush="#535657">
                                <ScrollViewer x:Name="CaptureRightTab" IsEnabled="True" VerticalScrollBarVisibility="Auto">
                                    <ScrollViewer.RenderTransform>
                                        <TransformGroup>
                                            <ScaleTransform/>
                                            <SkewTransform/>
                                            <RotateTransform/>
                                            <TranslateTransform/>
                                        </TransformGroup>
                                    </ScrollViewer.RenderTransform>
                                    <StackPanel>
                                        <local1:LevelGraph x:Name="CaptureLevelGraph"/>

                                        <local1:TurnTableControl x:Name="CTT"/>
                                    </StackPanel>
                                </ScrollViewer>
                            </Border>
                        </Grid>
                    </TabItem>

                    <TabItem Name="EditTab" IsEnabled="True" FontFamily="roboto" Header="Edit" Width="150px" >
                        <Grid Background="#2e2f30" Margin="-3,-3,-3,-3">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" MinWidth="260"/>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" MinWidth="260" />
                            </Grid.ColumnDefinitions>

                            <!--<local1:EditLeftControl Grid.Row="0" Grid.Column="0" />-->

                            <Border Grid.Row="0" Grid.Column="0"  BorderThickness="1" BorderBrush="#535657">
                                <Grid Grid.Row="0" Grid.Column="0" >
                                    <UniformGrid Columns="2"   Margin="2,0,2,0">
                                        <FrameworkElement x:Name="c2"/>
                                    </UniformGrid>
                                    <TabControl x:Name="tc_ImageSelection" Background="#2e2f30" Width="Auto" SelectionChanged="tc_ImageSelection_SelectionChanged" >
                                        <TabItem x:Name="tab_history" FontFamily="roboto" Grid.Column="0"  Header="History" Height="40" FontSize="12" Width="{Binding ElementName=c2, Path=ActualWidth}">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition MinWidth="220"></ColumnDefinition>
                                                </Grid.ColumnDefinitions>

                                                <TabControl Background="#2e2f30" >
                                                    <TabControl.Resources>
                                                        <Style TargetType="{x:Type TabItem}">

                                                            <Setter Property="Template">
                                                                <Setter.Value>
                                                                    <ControlTemplate TargetType="TabItem">
                                                                        <Border Name="Border" BorderThickness="0,0,0,0" BorderBrush="#7f8486" Margin="0,0">
                                                                            <ContentPresenter x:Name="ContentSite" 
                                        VerticalAlignment="Center"
                                        HorizontalAlignment="Center"
                                        ContentSource="Header"
                                        Margin="10,2"/>
                                                                        </Border>
                                                                        <ControlTemplate.Triggers>
                                                                            <Trigger Property="IsSelected" Value="True">
                                                                                <Setter TargetName="Border" Property="BorderBrush" Value="#007aff" />
                                                                                <Setter Property="TextElement.Foreground" Value="#007aff"/>
                                                                            </Trigger>
                                                                            <Trigger Property="IsSelected" Value="False">
                                                                                <Setter TargetName="Border" Property="BorderBrush" Value="#7f8486" />
                                                                                <Setter Property="TextElement.Foreground" Value="#7f8486"/>
                                                                            </Trigger>
                                                                        </ControlTemplate.Triggers>
                                                                    </ControlTemplate>
                                                                </Setter.Value>
                                                            </Setter>
                                                        </Style>
                                                    </TabControl.Resources>
                                                    <TabControl Background="#2e2f30" >
                                                        <TabItem MinHeight="23" x:Name="tab_history_VG" >
                                                            <TabItem.Header>
                                                                <materialDesign:PackIcon Kind="ViewGrid" Width="20" Height="20" Margin="0,0,0,0" />
                                                            </TabItem.Header>
                                                            <Grid >
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition />
                                                                    <ColumnDefinition />
                                                                </Grid.ColumnDefinitions>
                                                                <Grid.RowDefinitions >
                                                                    <RowDefinition Height="1" ></RowDefinition>
                                                                    <RowDefinition ></RowDefinition>
                                                                </Grid.RowDefinitions>
                                                                <Border Grid.Row="0" Width="260" BorderThickness="1" Background="#2e2f30" Margin="-10,0,-10,0" Grid.ColumnSpan="2" BorderBrush="#444647">

                                                                </Border>
                                                                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Disabled" Grid.ColumnSpan="2" >
                                                                    <ListBox VirtualizingStackPanel.IsVirtualizing="True" Name="ImageLIstBox" BorderThickness="0" Focusable="true" 
                                                                             ScrollViewer.HorizontalScrollBarVisibility="Disabled" ScrollViewer.VerticalScrollBarVisibility="Auto" Background="#2e2f30" SelectionChanged="ImageLIstBox_SelectionChanged" >
                                                                        <ListBox.ItemTemplate>
                                                                            <DataTemplate>
                                                                                <!--<StackPanel Orientation="Vertical" HorizontalAlignment="Stretch">
                                                                                    -->
                                                                                <!--<Image Margin="-15,5,0,3" x:Name="ImgViewGrid" Source="{Binding Path}" MaxHeight="100" MaxWidth="200" Stretch="Fill" MouseDown="ImgViewGrid_MouseDown"/>-->
                                                                                <!--
                                                                                    <Image Margin="4,10,0,0" x:Name="ImgViewGrid" Source="{Binding Path}" Height="120" Width="204" Stretch="Uniform" MouseDown="ImgViewGrid_MouseDown"/>
                                                                                    <TextBlock Margin="8,6,0,0" FontWeight="Medium" FontSize="12" Height="14" MaxWidth="120"  TextTrimming="WordEllipsis" HorizontalAlignment="Left" VerticalAlignment="Top"  Foreground="#FFFFFFFF" Text="{Binding FileName}" />
                                                                                    <TextBlock Margin="8,5,0,0" FontWeight="Medium" FontSize="10" Height="11" MaxWidth="120" TextTrimming="WordEllipsis" TextWrapping="Wrap" HorizontalAlignment="Left" VerticalAlignment="Bottom" Foreground="#7f8486" Text="{Binding DateModified}" />
                                                                                </StackPanel>-->
                                                                                <StackPanel Orientation="Vertical" HorizontalAlignment="Stretch" >
                                                                                    <Image Margin="0,10,0,0" x:Name="ImgViewGrid" Source="{Binding Path}" Height="120" Width="207" Stretch="Uniform" MouseDown="ImgViewGrid_MouseDown"/>
                                                                                    <TextBlock Margin="0,6,0,0" FontWeight="Medium" FontSize="12" Height="14" MaxWidth="120"  TextTrimming="WordEllipsis" HorizontalAlignment="Left" VerticalAlignment="Top"  Foreground="#FFFFFFFF" Text="{Binding folderName}" />
                                                                                    <TextBlock Margin="0,5,0,0" FontWeight="Medium" FontSize="10" Height="11" MaxWidth="120" TextTrimming="WordEllipsis" TextWrapping="Wrap" HorizontalAlignment="Left" VerticalAlignment="Bottom" Foreground="#7f8486" Text="{Binding DateModified}" />
                                                                                </StackPanel>
                                                                            </DataTemplate>
                                                                        </ListBox.ItemTemplate>
                                                                        <VirtualizingStackPanel Orientation="Vertical" VerticalAlignment="Top"/>
                                                                    </ListBox>
                                                                </ScrollViewer>
                                                            </Grid>
                                                        </TabItem>
                                                        <TabItem MinHeight="23" x:Name="tab_history_VL"  >
                                                            <TabItem.Header >
                                                                <materialDesign:PackIcon Kind="ViewList" Width="20" Height="20" Margin="-10,0,0,0" />
                                                            </TabItem.Header>
                                                            <Grid>
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition />
                                                                    <ColumnDefinition />
                                                                </Grid.ColumnDefinitions>
                                                                <Grid.RowDefinitions >
                                                                    <RowDefinition Height="1" ></RowDefinition>
                                                                    <RowDefinition ></RowDefinition>
                                                                </Grid.RowDefinitions>
                                                                <Border Grid.Row="0" Width="260" BorderThickness="1" Background="#2e2f30" Margin="-10,0,-10,0" Grid.ColumnSpan="2" BorderBrush="#444647">

                                                                </Border>
                                                                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Disabled" Grid.ColumnSpan="2">
                                                                    <ListBox  VirtualizingStackPanel.IsVirtualizing="True" Name="ImageListBox" BorderThickness="0" Focusable="False" 
                                                                              ScrollViewer.HorizontalScrollBarVisibility="Disabled" ScrollViewer.VerticalScrollBarVisibility="Auto" Background="#2e2f30" SelectionChanged="ImageLIstBox_SelectionChanged"  >
                                                                        <ListBox.ItemTemplate>
                                                                            <DataTemplate>
                                                                                <!--<StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch" MinWidth="220">
                                                                                    -->
                                                                                <!--<Image x:Name="Img123" Source="{Binding Path}" MaxHeight="45" MaxWidth="80" Stretch="Fill" MouseDown="ImgViewGrid_MouseDown"/>-->
                                                                                <!--
                                                                                    <Image Margin="-10,10,0,0" x:Name="Img123" Source="{Binding Path}" Height="50" Width="90" Stretch="Fill" MouseDown="ImgViewGrid_MouseDown"/>
                                                                                    <StackPanel Orientation="Vertical" VerticalAlignment="Center" HorizontalAlignment="Center" >
                                                                                        <TextBlock Margin="15,15,0,0" FontWeight="Medium" FontSize="12" Height="14" MaxWidth="85" TextTrimming="WordEllipsis" VerticalAlignment="Top"  Foreground="#ffffff" Text="{Binding FileName}" />
                                                                                        <TextBlock Margin="15,5,0,0" FontWeight="Medium" FontSize="10" Height="11" MaxWidth="80" TextTrimming="WordEllipsis" TextWrapping="Wrap" VerticalAlignment="Bottom" Foreground="#7f8486" Text="{Binding DateModified}" />
                                                                                    </StackPanel>
                                                                                </StackPanel>-->
                                                                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch" >
                                                                                    <Image Margin="0,10,0,0" x:Name="Img123" Source="{Binding Path}" Height="50" Width="89" Stretch="Uniform" MouseDown="ImgViewGrid_MouseDown"/>
                                                                                    <StackPanel Orientation="Vertical" VerticalAlignment="Center" HorizontalAlignment="Center" >
                                                                                        <TextBlock Margin="15,15,7,0" FontWeight="Medium" FontSize="12" Height="14" MaxWidth="85" TextTrimming="WordEllipsis" VerticalAlignment="Top"  Foreground="#ffffff" Text="{Binding folderName}" />
                                                                                        <TextBlock Margin="15,5,7,0" FontWeight="Medium" FontSize="10" Height="11" MaxWidth="80" TextTrimming="WordEllipsis" TextWrapping="Wrap" VerticalAlignment="Bottom" Foreground="#7f8486" Text="{Binding DateModified}" />
                                                                                    </StackPanel>
                                                                                </StackPanel>
                                                                            </DataTemplate>
                                                                        </ListBox.ItemTemplate>
                                                                        <VirtualizingStackPanel Orientation="Vertical" VerticalAlignment="Top"/>
                                                                    </ListBox>
                                                                </ScrollViewer>
                                                            </Grid>
                                                        </TabItem>
                                                        <TabItem >
                                                            <TabItem.Header>
                                                                <StackPanel Orientation="Horizontal" Margin="95,0,0,0">
                                                                    <RadioButton x:Name="rbHAsc" Background="Transparent" GroupName="ImageOrderh" Style="{StaticResource rbImageAscOrder}" IsChecked="True"  Margin="0,0,10,0" />
                                                                    <RadioButton x:Name="rbHDec" Background="Transparent" GroupName="ImageOrderh" Style="{StaticResource rbImageDescOrder}" Checked="rbDec_Checked" Unchecked="rbDec_Unchecked" />
                                                                </StackPanel>
                                                            </TabItem.Header>
                                                        </TabItem>
                                                    </TabControl>
                                                </TabControl>
                                            </Grid>
                                        </TabItem>

                                        <TabItem x:Name="tab_folder" FontFamily="roboto" Grid.Column="1" Header="Folder" Height="40" FontSize="12" Width="{Binding ElementName=c2, Path=ActualWidth}">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition MinWidth="220"></ColumnDefinition>
                                                </Grid.ColumnDefinitions>

                                                <TabControl Background="#2e2f30" >
                                                    <TabControl.Resources>
                                                        <Style TargetType="{x:Type TabItem}">

                                                            <Setter Property="Template">
                                                                <Setter.Value>
                                                                    <ControlTemplate TargetType="TabItem">
                                                                        <Border Name="Border" BorderThickness="0,0,0,0" BorderBrush="#7f8486" Margin="0,0">
                                                                            <ContentPresenter x:Name="ContentSite" 
                                        VerticalAlignment="Center"
                                        HorizontalAlignment="Center"
                                        ContentSource="Header"
                                        Margin="10,2"/>
                                                                        </Border>
                                                                        <ControlTemplate.Triggers>
                                                                            <Trigger Property="IsSelected" Value="True">
                                                                                <Setter TargetName="Border" Property="BorderBrush" Value="#007aff" />
                                                                                <Setter Property="TextElement.Foreground" Value="#007aff"/>
                                                                            </Trigger>
                                                                            <Trigger Property="IsSelected" Value="False">
                                                                                <Setter TargetName="Border" Property="BorderBrush" Value="#7f8486" />
                                                                                <Setter Property="TextElement.Foreground" Value="#7f8486"/>
                                                                            </Trigger>
                                                                        </ControlTemplate.Triggers>
                                                                    </ControlTemplate>
                                                                </Setter.Value>
                                                            </Setter>
                                                        </Style>
                                                    </TabControl.Resources>
                                                    <TabControl Background="#2e2f30" >

                                                        <TabItem MinHeight="23"  x:Name="tab_folder_VG" >
                                                            <TabItem.Header>
                                                                <materialDesign:PackIcon Kind="ViewGrid" Width="20" Height="20" Margin="0,0,0,0" />
                                                            </TabItem.Header>
                                                            <Grid>
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition />
                                                                    <ColumnDefinition />
                                                                </Grid.ColumnDefinitions>
                                                                <Grid.RowDefinitions >
                                                                    <RowDefinition Height="36" ></RowDefinition>
                                                                    <RowDefinition ></RowDefinition>
                                                                </Grid.RowDefinitions>
                                                                <Border Grid.Row="0" Width="260" BorderThickness="1" Background="#2e2f30" Margin="-10,0,-10,0" Grid.ColumnSpan="2" BorderBrush="#444647">
                                                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Top" >
                                                                        <Button Margin="13,5,10,5" x:Name="btn_Browse" Content="Folder Select" Width="85" Height="24" Style="{StaticResource Select_Folder}" Click="btn_Folderbrowse_Click"/>
                                                                        <TextBlock x:Name="tbFolderName" Width="135" Height="14" FontSize="12" FontFamily="roboto" FontWeight="Medium" Foreground="{StaticResource steel-greyBrush}"  HorizontalAlignment="Left" VerticalAlignment="Center" />
                                                                    </StackPanel>
                                                                </Border>
                                                                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Disabled" Grid.ColumnSpan="2" >
                                                                    <ListBox VirtualizingStackPanel.IsVirtualizing="True" Name="ImageLIstBox_Folder" BorderThickness="0" Focusable="False" 
                                                                             ScrollViewer.HorizontalScrollBarVisibility="Disabled" ScrollViewer.VerticalScrollBarVisibility="Auto" Background="#2e2f30" SelectionChanged="ImageLIstBox_Folder_SelectionChanged" >
                                                                        <ListBox.ItemTemplate>
                                                                            <DataTemplate>
                                                                                <StackPanel Orientation="Vertical" HorizontalAlignment="Stretch">
                                                                                    <Image Margin="0,10,0,0" x:Name="ImgViewGrid" Source="{Binding Path}" Height="120" Width="207" Stretch="Uniform" MouseDown="ImgViewGrid_MouseDown"/>
                                                                                    <TextBlock Margin="0,6,0,0" FontWeight="Medium" FontSize="12" Height="14" MaxWidth="120"  TextTrimming="WordEllipsis" HorizontalAlignment="Left" VerticalAlignment="Top"  Foreground="#FFFFFFFF" Text="{Binding FileName}" />
                                                                                    <TextBlock Margin="0,5,0,0" FontWeight="Medium" FontSize="10" Height="11" MaxWidth="120" TextTrimming="WordEllipsis" TextWrapping="Wrap" HorizontalAlignment="Left" VerticalAlignment="Bottom" Foreground="#7f8486" Text="{Binding DateModified}" />
                                                                                </StackPanel>
                                                                            </DataTemplate>
                                                                        </ListBox.ItemTemplate>
                                                                        <VirtualizingStackPanel Orientation="Vertical" VerticalAlignment="Top"/>
                                                                    </ListBox>
                                                                </ScrollViewer>
                                                            </Grid>
                                                        </TabItem>
                                                        <TabItem MinHeight="23"  x:Name="tab_folder_VL" >
                                                            <TabItem.Header>
                                                                <materialDesign:PackIcon Kind="ViewList" Width="20" Height="20" Margin="-10,0,0,0" />
                                                            </TabItem.Header>
                                                            <Grid>
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="14*"/>
                                                                    <ColumnDefinition Width="193*"/>
                                                                </Grid.ColumnDefinitions>
                                                                <Grid.RowDefinitions >
                                                                    <RowDefinition Height="36" ></RowDefinition>
                                                                    <RowDefinition ></RowDefinition>
                                                                </Grid.RowDefinitions>
                                                                <Border Grid.Row="0" Width="260" BorderThickness="1" Background="#2e2f30" Margin="-10,0,-10,0" Grid.ColumnSpan="2" BorderBrush="#444647">
                                                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Top" >
                                                                        <Button Margin="13,5,10,5" x:Name="btn_Browse_thmb" Content="Folder Select" Width="85" Height="24" Style="{StaticResource Select_Folder}" 
                                                Click="btn_Folderbrowse_Click"/>
                                                                        <TextBlock x:Name="tbFolderName_thmb" Width="135" Height="14" FontSize="12" FontFamily="roboto" FontWeight="Medium" Foreground="{StaticResource steel-greyBrush}"  HorizontalAlignment="Left" VerticalAlignment="Center" />
                                                                    </StackPanel>
                                                                </Border>
                                                                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Disabled" Grid.ColumnSpan="2">
                                                                    <ListBox VirtualizingStackPanel.IsVirtualizing="True"  Name="ImageListBox_Folder" BorderThickness="0" Focusable="False" 
                                                                             ScrollViewer.HorizontalScrollBarVisibility="Disabled" ScrollViewer.VerticalScrollBarVisibility="Auto" Background="#2e2f30" SelectionChanged="ImageLIstBox_Folder_SelectionChanged" >
                                                                        <ListBox.ItemTemplate>
                                                                            <DataTemplate>
                                                                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch" >
                                                                                    <Image Margin="0,10,0,0" x:Name="Img123" Source="{Binding Path}" Height="50" Width="89" Stretch="Fill" MouseDown="ImgViewGrid_MouseDown"/>
                                                                                    <StackPanel Orientation="Vertical" VerticalAlignment="Center" HorizontalAlignment="Center" >
                                                                                        <TextBlock Margin="15,15,7,0" FontWeight="Medium" FontSize="12" Height="14" MaxWidth="85" TextTrimming="WordEllipsis" VerticalAlignment="Top"  Foreground="#ffffff" Text="{Binding FileName}" />
                                                                                        <TextBlock Margin="15,5,7,0" FontWeight="Medium" FontSize="10" Height="11" MaxWidth="80" TextTrimming="WordEllipsis" TextWrapping="Wrap" VerticalAlignment="Bottom" Foreground="#7f8486" Text="{Binding DateModified}" />
                                                                                    </StackPanel>
                                                                                </StackPanel>
                                                                            </DataTemplate>
                                                                        </ListBox.ItemTemplate>
                                                                        <VirtualizingStackPanel Orientation="Vertical" VerticalAlignment="Top"/>
                                                                    </ListBox>
                                                                </ScrollViewer>
                                                            </Grid>
                                                        </TabItem>
                                                        <TabItem >
                                                            <TabItem.Header>
                                                                <StackPanel Orientation="Horizontal" Margin="95,0,0,0">
                                                                    <RadioButton x:Name="rbAsc" Background="Transparent" GroupName="ImageOrder" Style="{StaticResource rbImageAscOrder}" IsChecked="True"  Margin="0,0,10,0" />
                                                                    <RadioButton x:Name="rbDec" Background="Transparent" GroupName="ImageOrder" Style="{StaticResource rbImageDescOrder}" Checked="rbDec_Checked" Unchecked="rbDec_Unchecked" />
                                                                </StackPanel>
                                                            </TabItem.Header>
                                                        </TabItem>
                                                    </TabControl>
                                                </TabControl>
                                            </Grid>
                                        </TabItem>
                                    </TabControl>
                                </Grid>
                            </Border>
                            <Grid Grid.Column="1" >
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="40"/>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="163"/>
                                </Grid.RowDefinitions>

                                <Grid x:Name="grd_Edit_Buttons" Grid.Row="0" Background="#131415">
                                    <StackPanel VerticalAlignment="Center" >
                                        <Grid  x:Name="E_slidezoom">
                                            <StackPanel Orientation="Horizontal" Margin="15"  VerticalAlignment="Top" HorizontalAlignment="Center" >
                                                <StackPanel Orientation="Horizontal" Margin="0,0,30,0">
                                                    <ToggleButton Margin="0,0,10,0" x:Name="ETg_Btn6" Checked="Tg_Btn6_Checked" Unchecked="Tg_Btn6_Unchecked" VerticalAlignment="Center" HorizontalAlignment="Left" Height="20" Width="27" BorderThickness="0" Style="{StaticResource Vertical_Style}"   >
                                                        <ToggleButton.Background>
                                                            <ImageBrush ImageSource="Assets/Images/none/combineda.png"/>
                                                        </ToggleButton.Background>
                                                    </ToggleButton>
                                                    <ToggleButton x:Name="ETg_Btn7" Checked="Tg_Btn7_Checked" Unchecked="Tg_Btn7_Unchecked" VerticalAlignment="Center" HorizontalAlignment="Left" Height="20" Width="27" BorderThickness="0" Style="{StaticResource Horiz_Style}" >
                                                        <ToggleButton.Background>
                                                            <ImageBrush ImageSource="Assets/Images/none/combinedb.png"/>
                                                        </ToggleButton.Background>
                                                    </ToggleButton>
                                                </StackPanel>
                                                <StackPanel Orientation="Horizontal" Margin="0,0,30,0">
                                                    <RadioButton x:Name="Egrid1" Margin="0,0,10,0" Background="Transparent"  GroupName="GroupTool1" Style="{StaticResource ToolboxRadioSelector1}" IsChecked="True"  />
                                                    <RadioButton x:Name="Egrid2" Margin="0,0,10,0" Background="Transparent" Checked="grid2_Checked" Unchecked="grid2_Unchecked" GroupName="GroupTool1" Style="{StaticResource ToolboxRadioSelector2}" />
                                                    <RadioButton x:Name="Egrid3" Margin="0,0,10,0" Checked="grid3_Checked" Unchecked="grid3_Unchecked" Background="Transparent"  GroupName="GroupTool1" Style="{StaticResource ToolboxRadioSelector3}" />
                                                    <RadioButton x:Name="Egrid4" Margin="0,0,0,0" Checked="grid4_Checked" Unchecked="grid4_Unchecked" Background="Transparent" GroupName="GroupTool1" Style="{StaticResource ToolboxRadioSelector4}"/>
                                                </StackPanel>
                                                <StackPanel Orientation="Horizontal" Margin="0,0,30,0">
                                                    <ToggleButton x:Name="ETg_Btn8" Checked="ETg_Btn8_Checked" Unchecked="ETg_Btn8_Unchecked" VerticalAlignment="Center" HorizontalAlignment="Left" Height="20" Width="27" BorderThickness="0" Style="{StaticResource tb_Overlaystyle}"   >
                                                        <ToggleButton.Background>
                                                            <ImageBrush ImageSource="Assets/Images/none/group-2.png"/>
                                                        </ToggleButton.Background>
                                                    </ToggleButton>
                                                </StackPanel>
                                                <StackPanel Orientation="Horizontal" Margin="0,0,30,0">
                                                    <ToggleButton x:Name="ETg_Btn9" Checked="ETg_Btn9_Checked" Unchecked="ETg_Btn9_Unchecked" VerticalAlignment="Center" HorizontalAlignment="Left" Height="20"  Width="20" BorderThickness="0" Style="{StaticResource Crop_Style}"  >
                                                        <ToggleButton.Background>
                                                            <ImageBrush ImageSource="Assets/Images/none/group-26.png"/>
                                                        </ToggleButton.Background>
                                                    </ToggleButton>
                                                </StackPanel>
                                                <StackPanel Orientation="Horizontal">
                                                    <Button x:Name="ERotateLeft" Click="ERotateLeft_Click" Background="Transparent" Style="{StaticResource ToolboxRadioSelector8}" />
                                                    <Button x:Name="ERotateRight" Click="ERotateRight_Click" Background="Transparent" Style="{StaticResource ToolboxRadioSelector9}" />
                                                </StackPanel>

                                                <!-- Sid Change Start -->
                                                <StackPanel>
                                                    <Button x:Name="Tg_BtnEditbg" Width="40" Height="22" Margin="40,5,5,0" BorderThickness="0" Click="Tg_EditBtnbg_Click" MouseEnter="Tg_Btnbg_MouseEnter" MouseLeave="Tg_Btnbg_MouseLeave">
                                                        <Button.Background>
                                                            <ImageBrush ImageSource="Assets/Images/none/bg_1.png"/>
                                                        </Button.Background>
                                                    </Button>
                                                </StackPanel>
                                                <Border x:Name="brd_Editbg" Visibility="Collapsed" Grid.ColumnSpan="2" HorizontalAlignment="Right" VerticalAlignment="Center" Height="26" Margin="0,5,0,0" Background="#2e2f30" >
                                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center" >
                                                        <Button x:Name="btn_Editbg_3" Content="" Width="10" Height="10" Margin="5" Background="Black" Click="btn_Editbg_3_Click" />
                                                        <Button x:Name="btn_Editbg_2" Content="" Width="10" Height="10" Margin="5" Background="Gray" Click="btn_Editbg_2_Click" />
                                                        <Button x:Name="btn_Editbg_1" Content="" Width="10" Height="10" Margin="5" Background="White" Click="btn_Editbg_1_Click" />
                                                    </StackPanel>
                                                </Border>
                                                <!-- Sid Change Start -->

                                            </StackPanel>
                                        </Grid>
                                    </StackPanel>
                                </Grid>
                                <Grid x:Name="grd_Edit_canvasUpper" Grid.Row="1" Background="#131415">
                                    <StackPanel Name="StackCropMenu" Orientation="Horizontal" FlowDirection="LeftToRight"  HorizontalAlignment="Center" VerticalAlignment="Top" Background="#01444647" >
                                        <Label Name="LabelX" Visibility="Collapsed" Height="20" FontFamily="Roboto" FontSize="10" Content="X" Foreground="#7f8486" HorizontalAlignment="Right" />
                                        <TextBox Name="Text_X" Visibility="Collapsed" Background="Transparent" BorderThickness="0 0 0 1" BorderBrush="#7f8486" Width="50" Height="20" FontFamily="Roboto" FontSize="10" TextChanged="Text_X_TextChanged"  />
                                        <Label Name="LabelY" Visibility="Collapsed" Height="20" FontSize="10" Content="Y" Foreground="#7f8486" HorizontalAlignment="Right" />
                                        <TextBox Name="Text_Y" Background="Transparent" BorderThickness="0 0 0 1" BorderBrush="#7f8486" Visibility="Collapsed" Width="50" Height="20" FontFamily="Roboto" FontSize="10" TextChanged="Text_Y_TextChanged" />
                                        <Label Name="LabelW" Visibility="Collapsed" Height="25" FontSize="9" Content="Width" Foreground="#7f8486" HorizontalAlignment="Right" />
                                        <TextBox Name="Text_Width" Background="Transparent" BorderThickness="0 0 0 1" BorderBrush="#7f8486" Visibility="Collapsed" Width="50" Height="20" FontFamily="Roboto" FontSize="10" TextChanged="Text_Width_TextChanged" />
                                        <Label Name="LabelH" Visibility="Collapsed" Height="25" FontSize="9" Content="Height" Foreground="#7f8486" HorizontalAlignment="Right" />
                                        <TextBox Name="Text_Height" Background="Transparent" BorderThickness="0 0 0 1" BorderBrush="#7f8486" Visibility="Collapsed" Width="50" Height="20" FontFamily="Roboto" FontSize="10" KeyDown="Text_Height_KeyDown" TextChanged="Text_Height_TextChanged"  />
                                        <RadioButton x:Name="Eratio1" Visibility="Collapsed" Margin="20,0,5,0" HorizontalAlignment="Center" Checked="ratio1_Checked" Unchecked="ratio1_Unchecked" Background="Transparent" GroupName="GroupTool2" Style="{StaticResource ToolboxRadioSelector5}" />
                                        <RadioButton x:Name="Eratio2" Visibility="Collapsed" Margin="0,0,7,0" HorizontalAlignment="Center" Checked="ratio2_Checked" Unchecked="ratio2_Unchecked" Background="Transparent" GroupName="GroupTool2" Style="{StaticResource ToolboxRadioSelector6}"/>
                                        <RadioButton x:Name="Eratio3" Visibility="Collapsed" Margin="0,0,20,0" HorizontalAlignment="Center" Checked="ratio3_Checked" Unchecked="ratio3_Unchecked" Background="Transparent" GroupName="GroupTool2" Style="{StaticResource ToolboxRadioSelector7}"/>
                                        <Button Name="ButtonOK" Visibility="Collapsed" Width="70" Height="24" Content="OK"  Click="ButtonOK_Click" Style="{StaticResource Ok_Button}" />
                                    </StackPanel>
                                </Grid>

                                <Grid x:Name="grd_Edit_Canvasbg" Grid.Row="2" Background="#131415"  >

                                    <Grid Grid.ColumnSpan="2" >
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="1*"/>
                                            <RowDefinition Height="30*"/>
                                            <RowDefinition Height="2.5*"/>
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="4*"/>
                                            <ColumnDefinition Width="30*" />
                                            <ColumnDefinition Width="4*"/>
                                        </Grid.ColumnDefinitions>

                                        <Border Grid.Row="1" Grid.Column="1" Background="#ffffff" >
                                            <Grid x:Name="EditPicGrid" >
                                                <Image Visibility="Visible" x:Name="EditFramePic"  Grid.Column="1" Source="{Binding Path= PathImg, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"  />
                                                <Image x:Name="EditFramePicEdit"  Grid.Column="1" Source="{Binding Source={x:Static Member=Core:ServiceProvider.Settings}, Path=SelectedBitmap.DisplayEditImage}" Stretch="Uniform"   Opacity="1" />
                                                
                                                <!--<Grid x:Name="preLoader" Visibility="Collapsed">
                                                    <Image Name="img" gif:ImageBehavior.RepeatBehavior="Forever" 
                /> --><!--Visibility="Visible" gif:ImageBehavior.AnimatedSource="assets/images/spinner.gif"--><!--
                                                    <TextBlock x:Name="preloaderText" Text="Loading images, please wait..." HorizontalAlignment="Center" VerticalAlignment="Bottom" FontWeight="Medium" LineStackingStrategy="BlockLineHeight" Foreground="#FF0B0C0C"/>
                                                </Grid>-->
                                                 <!--gif:ImageBehavior.AnimatedSource="dslrpctoolsub/assets/images/spinner.gif"-->

                                                <Border BorderBrush="Black" BorderThickness="2,1,1,2"  Margin="20"  Background="#77000000" x:Name="preLoader" Visibility="Collapsed">
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="15*"/>
                                                    </Grid.ColumnDefinitions>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="15*"/>
                                                        <RowDefinition Height="12*" />
                                                        <RowDefinition Height="15*"/>
                                                    </Grid.RowDefinitions>

                                                   
                                                    <Image Grid.Column="0" Grid.Row="1" Name="img" gif:ImageBehavior.RepeatBehavior="Forever" 
                />
                                                   
                                                     <!--Visibility="Visible" gif:ImageBehavior.AnimatedSource="assets/images/spinner.gif"-->
                                                    <TextBlock Grid.Row="2" Grid.Column="0" x:Name="preloaderText" Text="Loading images, please wait..." HorizontalAlignment="Center" VerticalAlignment="Center" FontWeight="Medium" LineStackingStrategy="BlockLineHeight" Foreground="#FF0B0C0C"/>
                                                </Grid>
                                                </Border>
                                                <!--gif:ImageBehavior.AnimatedSource="dslrpctoolsub/assets/images/spinner.gif"-->

                                                <StackPanel x:Name="ProgressPannel" Background = "#c0c0c0" VerticalAlignment="Center" Visibility="Collapsed" Panel.ZIndex="888" Margin="10,0,10,0">
                                                    

                                                    <TextBlock x:Name="ProgressText" HorizontalAlignment = "Center" Margin = "0,10"  Text = "Applying All Frames..." Foreground="#FF0C0D0D" />

                                                        <Border Background="GhostWhite" BorderBrush="#404040" BorderThickness="1" Margin="15,0,15,0">
                                                            <ProgressBar x:Name = "ChangesProgress" Value = "50"  Margin = "0" Maximum = "100" Minimum="5" Height = "15"  Focusable="False" Foreground="#007aff" Background="#dcdcdc" IsIndeterminate="True"/>
                                                        </Border>

                                                        <TextBlock x:Name="ProgressLabel" HorizontalAlignment = "Center" Margin = "0,10,0,5"  Text = "Saving Frame 0 of 36" Foreground="#FF0C0D0D" FontWeight="Normal" FontSize="14" TextDecorations="{x:Null}" />
                                                    
                                                </StackPanel>
                                                


                                                <!--<MediaElement x:Name="loaderContent" Visibility="Collapsed" />-->
                                                <local1:WatermarkImage />
                                                <Line x:Name="EV_Line1" Grid.Column="1" VerticalAlignment="Stretch" HorizontalAlignment="Center" Grid.RowSpan="2" Stroke="Black" Fill="Black" StrokeThickness="2" />
                                                <Line x:Name="EH_Line1" Grid.Row="1" VerticalAlignment="Center" HorizontalAlignment="Stretch" Grid.ColumnSpan="2" Stroke="Black" Fill="Black" StrokeThickness="2"/>
                                                <Line x:Name="EVG_Line1" Grid.Column="1" VerticalAlignment="Stretch" Grid.RowSpan="2" Stroke="Black" Fill="Black" StrokeThickness="2"/>
                                                <Line x:Name="EVG_Line2" Grid.Column="1" VerticalAlignment="Stretch" Grid.RowSpan="2" Stroke="Black" Fill="Black" StrokeThickness="2"/>
                                                <Line x:Name="EVG_Line3" Grid.Column="1" VerticalAlignment="Stretch" Grid.RowSpan="2" Stroke="Black" Fill="Black" StrokeThickness="2"/>
                                                <Line x:Name="EVG_Line4" Grid.Column="1" VerticalAlignment="Stretch" Grid.RowSpan="2" Stroke="Black" Fill="Black" StrokeThickness="2"/>
                                                <Line x:Name="EVG_Line5" Grid.Column="1" VerticalAlignment="Stretch" Grid.RowSpan="2" Stroke="Black" Fill="Black" StrokeThickness="2"/>
                                                <Line x:Name="EHG_Line1" Grid.Row="1" HorizontalAlignment="Stretch" Grid.ColumnSpan="2" Stroke="Black" Fill="Black" StrokeThickness="2"/>
                                                <Line x:Name="EHG_Line2" Grid.Row="1" HorizontalAlignment="Stretch" Grid.ColumnSpan="2" Stroke="Black" Fill="Black" StrokeThickness="2"/>
                                                <Line x:Name="EHG_Line3" Grid.Row="1" HorizontalAlignment="Stretch" Grid.ColumnSpan="2" Stroke="Black" Fill="Black" StrokeThickness="2"/>

                                                <Image x:Name="Overlay1" Grid.Column="1" Stretch="Uniform" Visibility="Collapsed" Opacity="0.25" />
                                                <Image x:Name="Overlay2" Grid.Column="1" Stretch="Uniform" Visibility="Collapsed" Opacity="0.25" />
                                                <!--<Image x:Name="Overlay3" Grid.Column="1" Stretch="Uniform" Visibility="Collapsed" Opacity="1" />-->
                                                <Image x:Name="Overlay4" Grid.Column="1" Stretch="Uniform" Visibility="Collapsed" Opacity="0.25" />
                                                <Image x:Name="Overlay5" Grid.Column="1" Stretch="Uniform" Visibility="Collapsed" Opacity="0.25" />
                                                <!--<Rectangle Name="Overlay1" Grid.Row="1" Grid.Column="1" Margin="0" Grid.RowSpan="2" Visibility="Collapsed" Fill="White" Panel.ZIndex="-1" Opacity="10"/>
                                                <Rectangle Name="OverLay2" Grid.Row="1" Grid.Column="1" Margin="0" Grid.RowSpan="2" Visibility="Collapsed" Fill="DarkRed" Panel.ZIndex="0" Opacity="40"/>
                                                <Rectangle Name="Overlay3" Grid.Row="1" Grid.Column="1" Margin="0" Grid.RowSpan="2" Visibility="Collapsed" Fill="Blue" Panel.ZIndex="-2" Opacity="10"/>
                                                <Rectangle Name="Overlay4" Grid.Row="1" Grid.Column="1" Margin="0" Grid.RowSpan="2" Visibility="Collapsed" Fill="Black" Panel.ZIndex="-4" Opacity="10"/>-->

                                                <Rectangle Name="CropOut" Grid.Row="1" Grid.Column="1" Margin="0" Visibility="Collapsed" StrokeDashArray="2,2" Stroke="#007aff" StrokeThickness="3" Fill="Transparent" IsHitTestVisible="False" 
                                                           HorizontalAlignment="Left" VerticalAlignment="Top" />
                                                <ProgressBar x:Name="pb_Running" Height="20" VerticalAlignment="Bottom" HorizontalAlignment="Stretch" IsIndeterminate="True" Foreground="#FF2E74DA" 
                                                             Visibility="Collapsed" />
                                                <Grid HorizontalAlignment="Center">
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="auto" />
                                                        <RowDefinition Height="*" />
                                                    </Grid.RowDefinitions>

                                                    <!--<custom:LoadingSpinner
            Grid.Row="1"
            Margin="10"
            Cap="Triangle"
            Diameter="250"
            IsLoading="{Binding IsChecked, ElementName=cbIsLoading}"
            Thickness="1"
            Color="Black" />-->
                                                </Grid>

                                            </Grid>
                                        </Border>
                                    </Grid>
                                </Grid>

                                <Grid x:Name="grd_Edit_Bottom" Grid.Row="3" Background="#131415" >
                                    <!--<local1:EditBottomControl />-->
                                    <ScrollViewer x:Name="ListScroller" VerticalScrollBarVisibility="Disabled"  >
                                        <ListBox Name="ListBoxSnapshots" ScrollViewer.CanContentScroll="True" VirtualizingStackPanel.IsVirtualizing="True" ItemContainerStyle="{StaticResource SimpleListBoxItem}"
                                                      BorderThickness="0" Focusable="False" ScrollViewer.HorizontalScrollBarVisibility="Auto" ScrollViewer.VerticalScrollBarVisibility="Disabled" Background="#2e2f30"   SelectionChanged="ListBoxSnapshots_SelectionChanged" MouseDoubleClick="ListBoxSnapshots_MouseDoubleClick" >
                                            <ListBox.ItemTemplate>
                                                <DataTemplate>
                                                    <StackPanel Orientation="Horizontal">
                                                        <Image Margin="2,5,2,5" x:Name="ImgViewGrid" Source="{Binding Path}" Height="118" Width="209" Stretch="Uniform" />
                                                    </StackPanel>
                                                </DataTemplate>
                                            </ListBox.ItemTemplate>
                                            <ListBox.ItemsPanel>
                                                <ItemsPanelTemplate>
                                                    <StackPanel Orientation="Horizontal" IsItemsHost="True"  />
                                                </ItemsPanelTemplate>
                                            </ListBox.ItemsPanel>
                                        </ListBox>
                                    </ScrollViewer>
                                </Grid>
                                <Button Grid.Row="3" Visibility="Collapsed"  x:Name="ExportButton" Content="" Background="Transparent" Width="0" Height="0" BorderThickness="0" HorizontalAlignment="Center" Margin="30" Click="ExportButton_Click"  />

                            </Grid>

                            <Border Grid.Column="2" Background="#2e2f30"  BorderThickness="1" BorderBrush="#535657">
                                <ScrollViewer VerticalScrollBarVisibility="Auto">
                                    <ScrollViewer.RenderTransform>
                                        <TransformGroup>
                                            <ScaleTransform/>
                                            <SkewTransform/>
                                            <RotateTransform/>
                                            <TranslateTransform/>
                                        </TransformGroup>
                                    </ScrollViewer.RenderTransform>
                                    <StackPanel x:Name="leftEdit" IsEnabled="True">
                                        <local1:LevelGraph x:Name="EditLevelGraph" Background="#2e2f30"  />
                                        <Separator Height="1" Background="Black"/>
                                        <local1:Navigation/>
                                        <Separator Height="1" Background="Black"/>
                                        <local1:PhotoEdit/>
                                        <Separator Height="1" Background="Black"/>
                                        <local1:WatermarkSettings/>
                                    </StackPanel>
                                </ScrollViewer>
                            </Border>
                        </Grid>
                    </TabItem>

                    <!--<TabItem Name="LvVedio" FontFamily="roboto" Header="Vedio" Width="150px">
                        <Grid>
                            <Grid.RowDefinitions >
                                <RowDefinition Height="*" ></RowDefinition>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" ></ColumnDefinition>
                            </Grid.ColumnDefinitions>

                            <DockPanel Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2" Margin="0,0,0.2,0.4">
                                <layouts:LayoutGridBottom />
                                -->
                    <!--<local1:LVControler x:Name="myLVControler_2" Background="WhiteSmoke" ></local1:LVControler>-->
                    <!--
                            </DockPanel>
                        </Grid>
                    </TabItem>-->
                </TabControl>
            </Grid>
        </Grid>

        <Popup HorizontalAlignment="Left" Margin="338,261,0,0" Name="popup1" VerticalAlignment="Top" Height="38" Width="153" >
            <StackPanel Background="Red">
                <ProgressBar Height="15" HorizontalAlignment="Left" Margin="349,272,0,0" Name="progressBar1" VerticalAlignment="Top" Width="130" Foreground="#FF3EA3EA" Value="{Binding ElementName=textBox1, Path=Text.Length, Mode=OneTime}"   Maximum="140" />

            </StackPanel>
        </Popup>
    </Grid>
</Controls:MetroWindow >
